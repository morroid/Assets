(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([[9404],{707839:(e,t,n)=>{e.exports=n.p+"7d94f3993be7043f4b9131b10ca5c7d9.svg"},840008:(e,t,n)=>{e.exports=n.p+"fd134fab56c496d554b4eb36d3e92289.svg"},17589:(e,t,n)=>{e.exports=n.p+"513f881c80a414c9f58190184516189b.svg"},831950:(e,t,n)=>{"use strict";n.d(t,{KV:()=>s,E$:()=>l});var r=n(368365),i=n(304856),o=n(108580);function a(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}var s=function(e){return null==e.roles?[]:Object.values(e.roles).sort(i.W).map((function(e){return(0,i.X0)(e)}))},l=function(e,t,n){return Object.values(e.roles).filter((function(e){return(0,i.GJ)(e)||function(e,t,n){if(null==e.id)return!1;var i=o.ZP.computePermissionsForRoles({forceRoles:a({},e.id,e),context:n});return r.Z.has(i,t)}(e,n,t)}))}},409404:(e,t,n)=>{"use strict";n.r(t);n.d(t,{default:()=>Lo})
;var r=n(785893),i=n(667294),o=n(294184),a=n.n(o),s=n(781629),l=n.n(s),c=n(948861),u=n(666164),d=n(125447),f=n(705475),h=n(123042),g=n(895721),m=n(791462),p=n(820028),v=n(489992),y=n(483562),b=n(824624),O=n(952013),S=n(747465),C=n(53211),j=n(95048),x=n(805448),E=n(113204),w=n(848828),_=n(419315),P=n(657935),N=n(234162),A=n(672549),T=n(973381),R=n(28633),I=n(551821),M=n(665357),Z=n(803204),L=n(915354),k=n(356004),D=n(402124),F=n(172701),H=n(426217),U=n(191940),G=n(629590),V=n(761434),B=n(221713),z=n(21979),W=n(804116),K=n(81951),q=n(880068),X=n(801763),Y=n(238585),$=n(253873),Q=n(103686),J=n(941361),ee=n(402724),te=n(526061),ne=n(266644),re=n(150703);const ie={useForumChannelSeenManager:function(e){var t=e.guildId,n=e.channelId,r=i.useRef(null),o=(0,ne.UU)(),a=!H.Z.isFocused(o);i.useLayoutEffect((function(){if(null==r.current){r.current=new re.ZP({guildId:t,channelId:n,isPaused:a,windowId:o});r.current.initialize()}return function(){var e;null===(e=r.current)||void 0===e||e.terminate()
;r.current=null}}),[n,t,a,o]);return r.current}};var oe=n(215219),ae=n(426466),se=n(730381),le=n.n(se),ce=n(248088),ue=n(87913),de=n(368365),fe=n(277563),he=n(429111),ge=n(730189),me=n(485923),pe=n(304856),ve=n(653772),ye=n(983067),be=n(719455),Oe=n(240243);function Se(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}function Ce(e,t){t=null!=t?t:{};Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})));n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}));return e}function je(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++){n=o[r]
;t.indexOf(n)>=0||(i[n]=e[n])}return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++){n=o[r];t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}}return i}function xe(e){var t=e.width,n=void 0===t?16:t,i=e.height,o=void 0===i?16:i,a=e.color,s=void 0===a?"currentColor":a,l=e.foreground,c=je(e,["width","height","color","foreground"]);return(0,r.jsxs)("svg",Ce(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))));r.forEach((function(t){Se(e,t,n[t])}))}return e}({},(0,Oe.Z)(c)),{width:n,height:o,viewBox:"0 0 16 16",children:[(0,r.jsx)("path",{className:l,fill:s,
d:"M6.78802 8.60547H2.54555C2.211 8.60547 1.93949 8.87699 1.93949 9.21154C1.93949 9.54608 2.211 9.8176 2.54555 9.8176H5.32498L1.511 13.6316C1.27433 13.8682 1.27433 14.2519 1.511 14.4886C1.62918 14.607 1.78433 14.6661 1.93949 14.6661C2.09464 14.6661 2.24979 14.607 2.36798 14.4886L6.18195 10.6746V13.454C6.18195 13.7886 6.45347 14.0601 6.78802 14.0601C7.12257 14.0601 7.39409 13.7886 7.39409 13.454V9.21154C7.39409 8.87699 7.12257 8.60547 6.78802 8.60547Z"}),(0,r.jsx)("path",{className:l,fill:s,d:"M14.4891 1.50953C14.2524 1.27286 13.8687 1.27286 13.6321 1.50953L9.81809 5.32351V2.54409C9.81809 2.20954 9.54657 1.93802 9.21202 1.93802C8.87748 1.93802 8.60596 2.20954 8.60596 2.54409V6.78655C8.60596 7.1211 8.87748 7.39262 9.21202 7.39262H13.4545C13.789 7.39262 14.0606 7.1211 14.0606 6.78655C14.0606 6.45201 13.789 6.18049 13.4545 6.18049H10.6751L14.4891 2.36651C14.7257 2.12984 14.7257 1.7462 14.4891 1.50953Z"})]}))}function Ee(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,
configurable:!0,writable:!0}):e[t]=n;return e}function we(e,t){t=null!=t?t:{};Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})));n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}));return e}function _e(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++){n=o[r];t.indexOf(n)>=0||(i[n]=e[n])}return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++){n=o[r];t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}}return i}function Pe(e){
var t=e.width,n=void 0===t?16:t,i=e.height,o=void 0===i?16:i,a=e.color,s=void 0===a?"currentColor":a,l=e.foreground,c=_e(e,["width","height","color","foreground"]);return(0,r.jsxs)("svg",we(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))));r.forEach((function(t){Ee(e,t,n[t])}))}return e}({},(0,Oe.Z)(c)),{width:n,height:o,viewBox:"0 0 16 16",children:[(0,r.jsx)("path",{className:l,fill:s,
d:"M1.93944 14.6655H6.18191C6.51646 14.6655 6.78797 14.394 6.78797 14.0594C6.78797 13.7249 6.51646 13.4534 6.18191 13.4534H3.40249L7.21646 9.63937C7.45313 9.40271 7.45313 9.01906 7.21646 8.7824C7.09828 8.66391 6.94313 8.60482 6.78797 8.60482C6.63282 8.60482 6.47767 8.66391 6.35948 8.7824L2.54551 12.5964V9.81695C2.54551 9.4824 2.27399 9.21089 1.93944 9.21089C1.60489 9.21089 1.33337 9.4824 1.33337 9.81695V14.0594C1.33337 14.394 1.60489 14.6655 1.93944 14.6655Z"}),(0,r.jsx)("path",{className:l,fill:s,d:"M8.78362 7.21512C9.02029 7.45179 9.40393 7.45179 9.6406 7.21512L13.4546 3.40114V6.18056C13.4546 6.51511 13.7261 6.78663 14.0606 6.78663C14.3952 6.78663 14.6667 6.51511 14.6667 6.18056V1.9381C14.6667 1.60355 14.3952 1.33203 14.0606 1.33203L9.81818 1.33203C9.48363 1.33203 9.21211 1.60355 9.21211 1.9381C9.21211 2.27265 9.48363 2.54416 9.81818 2.54416H12.5976L8.78362 6.35814C8.54695 6.59481 8.54695 6.97845 8.78362 7.21512Z"})]}))}
var Ne=n(436035),Ae=n(381604),Te=n(169364),Re=n(897576),Ie=n(226300),Me=n(882699),Ze=n(831950),Le=n(268461),ke=n(888312),De=n(357409),Fe=n(461061),He=n(959797),Ue=n(620771),Ge=n.n(Ue);function Ve(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(e){n(e);return}s.done?t(l):Promise.resolve(l).then(r,i)}function Be(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){Ve(o,r,i,a,s,"next",e)}function s(e){Ve(o,r,i,a,s,"throw",e)}a(void 0)}))}}function ze(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}function We(e,t){t=null!=t?t:{};Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})));n.push.apply(n,r)}return n
}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}));return e}var Ke=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;(r=0,i)&&(o=[2&o[0],i.value]);switch(o[0]){case 0:case 1:i=o;break;case 4:a.label++;return{value:o[1],done:!1};case 5:a.label++;r=o[1];o=[0];continue;case 7:o=a.ops.pop();a.trys.pop();continue;default:if(!(i=a.trys,i=i.length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1];i=o;break}if(i&&a.label<i[2]){a.label=i[2]
;a.ops.push(o);break}i[2]&&a.ops.pop();a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e];r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};function qe(e){var t=e.channelName,o=e.guildId,a=e.tagFilter,s=e.channel,l=(0,te.r_)(s),c=(0,I.cD)(s),u=i.useCallback((function(){(0,ae.qz)();(0,Re.ZD)(Be((function(){var e,t;return Ke(this,(function(i){switch(i.label){case 0:return[4,Promise.all([n.e(40532),n.e(37105)]).then(n.bind(n,750959))];case 1:e=i.sent(),t=e.default;return[2,function(e){return(0,r.jsx)(t,We(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))));r.forEach((function(t){ze(e,t,n[t])}))}return e}({},e),{guildId:o}))}]}}))})),{onCloseRequest:Fe.VqG})}),[o]),d=a.size>0,f=c||l,h=!d&&l,g=i.useCallback((function(){
return h?u():c?void Me.S.dispatch(Fe.CkL.FOCUS_COMPOSER_TITLE):(0,Fe.VqG)()}),[u,h,c]);return(0,r.jsxs)("div",{className:Ge().container,children:[(0,r.jsxs)("div",{className:Ge().iconContainer,children:[(0,r.jsx)("div",{className:Ge().icon,children:(0,r.jsx)(ke.Z,{width:30,height:30})}),(0,r.jsx)(De.Z,{className:Ge().stars})]}),(0,r.jsx)(v.X6,{className:Ge().header,variant:"heading-md/semibold",children:d?He.Z.Messages.FORUM_NO_POST_WITH_TAG_TITLE.format({numTags:a.size}):He.Z.Messages.FORUM_EMPTY_STATE_TITLE}),(0,r.jsx)(v.xv,{color:"header-secondary",variant:"text-sm/normal",children:d?He.Z.Messages.FORUM_NO_POST_WITH_TAG_DESCRIPTION.format({numTags:a.size}):He.Z.Messages.FORUM_EMPTY_STATE_DESCRIPTION.format({channelName:t})}),f&&(0,r.jsxs)(U.Co,{look:U.Co.Looks.BLANK,size:U.Co.Sizes.MIN,color:U.Co.Colors.GREEN,onClick:g,className:Ge().cta,innerClassName:Ge().button,children:[h?He.Z.Messages.FORUM_EMPTY_STATE_CTA:He.Z.Messages.FORUM_EMPTY_STATE_CREATE_POST_CTA,(0,r.jsx)(Te.Z,{width:12
})]})]})}var Xe=n(813935),Ye=n(809633),$e=n(487171),Qe=n.n($e);function Je(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function et(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(e){n(e);return}s.done?t(l):Promise.resolve(l).then(r,i)}function tt(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){et(o,r,i,a,s,"next",e)}function s(e){et(o,r,i,a,s,"throw",e)}a(void 0)}))}}function nt(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}function rt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))));r.forEach((function(t){nt(e,t,n[t])}))}return e}function it(e,t){t=null!=t?t:{}
;Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})));n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}));return e}function ot(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done);a=!0){o.push(r.value);if(t&&o.length===t)break}}catch(e){s=!0;i=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Je(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name)
;if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Je(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var at=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;(r=0,i)&&(o=[2&o[0],i.value]);switch(o[0]){case 0:case 1:i=o;break;case 4:a.label++;return{value:o[1],done:!1};case 5:a.label++;r=o[1];o=[0];continue;case 7:o=a.ops.pop();a.trys.pop();continue;default:if(!(i=a.trys,
i=i.length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1];i=o;break}if(i&&a.label<i[2]){a.label=i[2];a.ops.push(o);break}i[2]&&a.ops.pop();a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e];r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},st={width:28,height:28},lt={width:20,height:20,borderRadius:10},ct=function(e){(0,ae.e5)({onboardingCTA:e})},ut=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);this.currentIndex=0;this.steps=[];this.completedSteps=0}var t=e.prototype;t.addStep=function(e){++this.currentIndex;this.steps.push(rt({index:this.currentIndex},e));e.isDone&&this.completedSteps++};t.getSteps=function(){return this.steps};t.isAllDone=function(){return this.steps.every((function(e){return e.isDone}))};return e}(),dt=function(e,t,o,a){
return i.useMemo((function(){var i=new ut;null!=e&&null!=t&&i.addStep(function(e,t,i){var o=(0,me.Z)(t)?de.Z.combine(Fe.Plq.VIEW_CHANNEL,Fe.Plq.SEND_MESSAGES):Fe.Plq.SEND_MESSAGES,a=null!=e?(0,Ze.E$)(e,t,o).filter((function(n){return t.permissionOverwrites.hasOwnProperty(n.id)||(0,pe.pM)(e.id,n.id)})):[],s=a.length>0,l=a.some((function(t){return(0,pe.pM)(e.id,t.id)}));return{name:He.Z.Messages.FORUM_CHANNEL_ONBOARDING_CHECKLIST_PERMISSION_TITLE,description:He.Z.Messages.FORUM_CHANNEL_ONBOARDING_CHECKLIST_PERMISSION_DESCRIPTION,isDone:s&&l,shouldWarn:s&&!l,children:s?(0,r.jsx)(ft,{guild:e,roles:a}):null,clickHandler:function(){ct(Ye.ZI.PERMISSIONS);(0,Re.ZD)(tt((function(){var s,l;return at(this,(function(c){switch(c.label){case 0:return[4,Promise.all([n.e(40532),n.e(40505)]).then(n.bind(n,140505))];case 1:s=c.sent(),l=s.default;i(!0);return[2,function(n){return(0,r.jsx)(l,it(rt({},n),{channel:t,guild:e,permission:o,currentSelectedRoles:a}))}]}}))})),{
modalKey:"SEND_MESSAGE_ROLE_PERMISSION_FIX_MODAL_KEY",onCloseRequest:Fe.VqG,onCloseCallback:function(){return i(!1)}})}}}(e,t,a));i.addStep(function(e){var t=null!=e.topic&&e.topic.length>0;return{name:He.Z.Messages.FORUM_CHANNEL_ONBOARDING_CHECKLIST_GUIDELINES_TITLE,description:He.Z.Messages.FORUM_CHANNEL_ONBOARDING_CHECKLIST_GUIDELINES_DESCRIPTION,clickHandler:function(){ct(Ye.ZI.GUIDELINES);y.ZP.open(e.id,void 0,Fe.ZfP.TOPIC)},isDone:t}}(t));i.addStep(function(e){var t=null!=e.availableTags&&e.availableTags.length>0;return{name:He.Z.Messages.FORUM_CHANNEL_ONBOARDING_CHECKLIST_TAGS_TITLE,description:He.Z.Messages.FORUM_CHANNEL_ONBOARDING_CHECKLIST_TAGS_DESCRIPTION,clickHandler:function(){ct(Ye.ZI.TAGS);y.ZP.open(e.id);(0,Re.ZD)(tt((function(){var t,i;return at(this,(function(o){switch(o.label){case 0:return[4,Promise.all([n.e(40532),n.e(50205)]).then(n.bind(n,150205))];case 1:t=o.sent(),i=t.default;return[2,function(t){return(0,r.jsx)(i,it(rt({},t),{channelId:e.id,guildId:e.guild_id
}))}]}}))})))},isDone:t}}(t));i.addStep(function(e){var t=null!=e.defaultReactionEmoji;return{name:He.Z.Messages.FORUM_CHANNEL_ONBOARDING_CHECKLIST_DEFAULT_REACTION_TITLE,description:He.Z.Messages.FORUM_CHANNEL_ONBOARDING_CHECKLIST_DEFAULT_REACTION_DESCRIPTION,clickHandler:function(){ct(Ye.ZI.DEFAULT_REACTION);(0,Re.ZD)(tt((function(){var t,i;return at(this,(function(o){switch(o.label){case 0:return[4,Promise.all([n.e(40532),n.e(12603)]).then(n.bind(n,112603))];case 1:t=o.sent(),i=t.default;return[2,function(t){return(0,r.jsx)(i,it(rt({},t),{channel:e}))}]}}))})))},isDone:t}}(t));i.addStep(function(e,t){return{name:He.Z.Messages.FORUM_CHANNEL_ONBOARDING_CHECKLIST_FIRST_POST_TITLE,description:He.Z.Messages.FORUM_CHANNEL_ONBOARDING_CHECKLIST_FIRST_POST_DESCRIPTION.format({onClick:function(e){if(null!=t){e.preventDefault();e.stopPropagation();(0,ae.qz)();(0,Re.ZD)(tt((function(){var e,i;return at(this,(function(o){switch(o.label){case 0:
return[4,Promise.all([n.e(40532),n.e(37105)]).then(n.bind(n,750959))];case 1:e=o.sent(),i=e.default;return[2,function(e){return(0,r.jsx)(i,it(rt({},e),{guildId:t}))}]}}))})),{onCloseRequest:Fe.VqG})}}}),clickHandler:function(){ct(Ye.ZI.CREATE_POST);Me.S.dispatch(Fe.CkL.FOCUS_COMPOSER_TITLE)},isDone:e}}(o,null==e?void 0:e.id));return i}),[t,e,o,a])},ft=function(e){var t=e.guild,n=e.roles;return(0,r.jsx)("div",{className:Qe().rolesList,"aria-label":He.Z.Messages.ROLES_LIST.format({numRoles:n.length}),children:n.map((function(e){return(0,r.jsx)(he.U,{role:e,canRemove:!1,onRemove:Fe.VqG,guildId:t.id,className:Qe().rolePill},e.id)}))})},ht={mass:1,tension:250,friction:18,clamp:!0},gt=function(e){var t,n,r=e.guild,o=e.channel,a=e.hasAnyThread,s=e.handleHide,l=ot(i.useState(!1),2),c=l[0],u=l[1],d=(0,Le.c)(o.id),f=(0,m.e7)([$.Z],(function(){return $.Z.hasHidden(o.id)})),h=dt(r,o,a,u),g=h.isAllDone();!function(e,t,n,r){var o=i.useRef(0);i.useEffect((function(){
n||!e||t?clearTimeout(o.current):o.current=setTimeout((function(){r()}),6e4);return function(){return clearTimeout(o.current)}}),[e,t,r,n])}(g,d||f||!(t=o.id,n=fe.default.extractTimestamp(t),le()().isBefore(le()(n).add(le().duration(15,"days")))),c,s);return{onboardingSteps:h,isHidden:f,isDismissed:d,isAllDone:g}},mt=function(e){var t=e.handleHide;return(0,r.jsx)(G.Z,{onClick:t,className:Qe().closeButton,"aria-label":He.Z.Messages.DISMISS,children:(0,r.jsx)(be.Z,{className:Qe().closeIcon})})},pt=function(e){var t=e.expanded,n=e.onClick;return(0,r.jsx)(G.Z,{onClick:n,className:Qe().closeButton,"aria-label":t?He.Z.Messages.COLLAPSE:He.Z.Messages.EXPAND,children:t?(0,r.jsx)(xe,{className:Qe().closeIcon}):(0,r.jsx)(Pe,{className:Qe().closeIcon})})};const vt=function(e){var t=e.hasAnyThread,n=e.channel,o=(0,Xe.xH)((function(e){return{onboardingExpanded:e.onboardingExpanded}})),s=o.onboardingExpanded,l=(0,ee.H)(n.id).tagFilter,c=(0,m.e7)([ve.Z],(function(){
return ve.Z.getGuild(n.getGuildId())})),u=(0,te.r_)(n),d=function(){var e=ot(i.useState(!0),2),t=e[0],n=e[1],r=(0,m.e7)([ge.Z],(function(){return ge.Z.useReducedMotion})),o=(0,ce.useTransition)(t,{keys:function(e){return e?"shown":"hidden"},config:ht,from:{opacity:0},enter:{opacity:1},leave:{opacity:0},unique:!0,immediate:r});return{transitions:o,setVisible:n}}(),f=d.transitions,h=d.setVisible,g=function(e){var t=(0,m.e7)([ge.Z],(function(){return ge.Z.useReducedMotion}));return(0,ce.useTransition)(e,{from:{maxHeight:0},enter:{maxHeight:500},leave:{maxHeight:0},config:{duration:200},immediate:t})}(s),p=i.useCallback((function(e){var t;null===(t=e.clickHandler)||void 0===t||t.call(e)}),[]),y=function(e,t){return i.useCallback((function(){t(!1);return Q.Z.hideAdminOnboarding(e,!0)}),[e,t])}(n.id,h),b=gt({guild:c,channel:n,hasAnyThread:t,handleHide:y}),O=b.onboardingSteps,S=b.isDismissed,C=b.isHidden,j=b.isAllDone,x=!C&&!S,E=(0,Xe.AF)(),w=function(e){
return E.getState().setOnboardingExpanded(e)};!function(e,t,n){i.useEffect((function(){e&&t&&n()}),[])}(j,x,y);!function(e){var t=e.isAllDone,n=e.isVisible,r=e.canManageChannel,o=e.guild,a=e.channel,s=i.useCallback((function(){Me.S.dispatch(Fe.CkL.REMEASURE_TARGET)}),[]);i.useEffect((function(){s()}),[s,t,n,r,null==o?void 0:o.roles,a.id,a.permissionOverwrites])}({isAllDone:j,isVisible:x,canManageChannel:u,guild:c,channel:n});!function(e,t,n){i.useEffect((function(){e||n(!t)}),[e,n,t])}(S,C,h);i.useEffect((function(){t&&x||w(!0)}),[]);return null==c?null:x&&u?(0,r.jsx)(r.Fragment,{children:f((function(e,t){return t?(0,r.jsx)(ce.animated.div,{style:e,className:Qe().container,children:(0,r.jsxs)("div",{className:Qe().wrapper,children:[(0,r.jsx)("div",{className:Qe().headerRow,children:(0,r.jsxs)(v.y5,{component:(0,r.jsx)(v.X6,{variant:"heading-md/semibold",children:He.Z.Messages.GET_STARTED}),children:[(0,r.jsx)(v.X6,{variant:"heading-md/medium",className:Qe().header,
children:He.Z.Messages.FORUM_CHANNEL_ONBOARDING_COMPLETED_COUNT.format({numCompleted:O.completedSteps,numSteps:O.steps.length})}),(0,r.jsxs)(v.xv,{variant:"text-xs/normal",className:Qe().visibilityInfo,children:[(0,r.jsx)(Ne.Z,{width:12,height:12,className:Qe().icon}),He.Z.Messages.FORUM_CHANNEL_ONBOARDING_VISIBILITY]}),(0,r.jsx)(pt,{expanded:s,onClick:function(){return w(!s)}}),(0,r.jsx)(mt,{handleHide:y})]})}),g((function(e,t){return t?(0,r.jsx)(ce.animated.div,{style:e,className:Qe().listContainer,children:(0,r.jsx)("ol",{className:Qe().checklist,children:O.getSteps().map((function(e){return(0,r.jsxs)(G.Z,{tag:"li","aria-label":e.name,onClick:function(){return p(e)},className:a()(Qe().stepContainer,nt({},Qe().completed,e.isDone)),children:[e.shouldWarn?(0,r.jsx)(K.Z,{color:ue.Z.STATUS_DANGER,className:Qe().stepStatus}):e.isDone?(0,r.jsx)(Ie.G2,{color:ue.Z.STATUS_POSITIVE_BACKGROUND,icon:ye.Z,style:lt,className:Qe().stepStatus}):(0,r.jsx)(Ie.G2,{disableColor:!0,icon:Ae.Z,style:st,
className:a()(Qe().stepStatus,Qe().completed)}),(0,r.jsxs)("div",{className:Qe().step,children:[(0,r.jsx)(v.xv,{variant:"text-md/medium",color:e.isDone?"header-secondary":"header-primary",className:Qe().stepName,children:e.name}),(0,r.jsx)(v.xv,{variant:"text-sm/normal",color:"header-secondary",className:Qe().stepDescription,children:e.description}),e.children]}),(0,r.jsx)(Te.Z,{width:12,className:Qe().stepStatus})]},"onboard-step-".concat(e.index))}))})}):null}))]})}):null}))}):t?null:(0,r.jsx)(qe,{channelName:n.name,guildId:n.guild_id,tagFilter:l,channel:n})};var yt=n(74907),bt=n(531243),Ot=n(878627),St=n(939616),Ct=n.n(St),jt=n(169595),xt=n.n(jt);function Et(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function wt(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(e){n(e);return}s.done?t(l):Promise.resolve(l).then(r,i)}function _t(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n)
;function a(e){wt(o,r,i,a,s,"next",e)}function s(e){wt(o,r,i,a,s,"throw",e)}a(void 0)}))}}function Pt(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}function Nt(e,t){t=null!=t?t:{};Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})));n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}));return e}function At(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done);a=!0){o.push(r.value);if(t&&o.length===t)break}}catch(e){s=!0;i=e}finally{try{
a||null==n.return||n.return()}finally{if(s)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Et(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Et(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Tt=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),
0):r.next)&&!(i=i.call(r,o[1])).done)return i;(r=0,i)&&(o=[2&o[0],i.value]);switch(o[0]){case 0:case 1:i=o;break;case 4:a.label++;return{value:o[1],done:!1};case 5:a.label++;r=o[1];o=[0];continue;case 7:o=a.ops.pop();a.trys.pop();continue;default:if(!(i=a.trys,i=i.length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1];i=o;break}if(i&&a.label<i[2]){a.label=i[2];a.ops.push(o);break}i[2]&&a.ops.pop();a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e];r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};const Rt=i.memo((function(e){var t=e.channel,o=e.onChange,s=(0,Xe.AF)(),l=(0,Xe.xH)((function(e){return{guidelinesOpen:e.guidelinesOpen}})).guidelinesOpen,c=(0,te.r_)(t),u=At(i.useState(!1),2),d=u[0],f=u[1],h=i.useCallback((function(e){if(null!=e){var t=e.clientHeight>=220;t!==d&&f(t)}}),[d]);i.useLayoutEffect((function(){setTimeout(o,350)}),[l,o])
;var g=(0,m.e7)([ge.Z],(function(){return ge.Z.useReducedMotion})),p=At(i.useState(!0),2),b=p[0],O=p[1],S=(0,ce.useSpring)({opacity:l?1:0,maxHeight:l?500:0,config:{duration:300},immediate:g,onRest:function(){return O(!l)}});return null!=t.topic&&t.topic.length>0?(0,r.jsx)(ce.animated.div,{style:S,className:b?Ct().hiddenVisually:void 0,children:(0,r.jsxs)("div",{className:Ct().container,children:[(0,r.jsxs)("div",{className:Ct().headerContainer,children:[(0,r.jsxs)(v.X6,{variant:"heading-lg/semibold",className:Ct().guidelinesHeader,children:[(0,r.jsx)(bt.Z,{width:20,height:20}),He.Z.Messages.FORUM_POST_GUIDELINES_TITLE,c&&(0,r.jsx)(G.Z,{onClick:function(){y.ZP.open(t.id,void 0,Fe.ZfP.TOPIC)},tag:"span",className:Ct().clickable,children:(0,r.jsx)(Ot.Z,{width:16,height:16})})]}),(0,r.jsx)(G.Z,{"aria-label":He.Z.Messages.CLOSE,className:Ct().clickable,onClick:function(){s.getState().setGuidelinesOpen(!1)},children:(0,r.jsx)(be.Z,{width:16,height:16})})]}),(0,r.jsxs)("div",{
className:Ct().descriptionContainer,children:[(0,r.jsx)(v.xv,{selectable:!0,variant:"text-sm/normal",color:"header-secondary",style:{maxHeight:220},className:a()(Ct().guidelines,xt().markup),children:(0,r.jsx)("div",{ref:h,children:yt.Z.parseTopic(t.topic,!0,{channelId:t.id,allowHeading:!0,allowList:!0})})}),d&&(0,r.jsxs)("div",{className:Ct().showMore,children:[(0,r.jsx)("div",{className:Ct().gradient}),(0,r.jsx)("div",{className:Ct().linkContainer,children:(0,r.jsx)(G.Z,{className:Ct().showMoreLink,onClick:function(){(0,Re.ZD)(_t((function(){var e,i;return Tt(this,(function(o){switch(o.label){case 0:return[4,Promise.all([n.e(40532),n.e(42894)]).then(n.bind(n,742894))];case 1:e=o.sent(),i=e.default;return[2,function(e){return(0,r.jsx)(i,Nt(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){
return Object.getOwnPropertyDescriptor(n,e).enumerable}))));r.forEach((function(t){Pt(e,t,n[t])}))}return e}({},e),{channel:t}))}]}}))})))},children:(0,r.jsxs)(v.xv,{variant:"text-sm/semibold",color:"text-brand",className:Ct().showMoreText,children:[He.Z.Messages.FORUM_CHANNEL_TOPIC_VIEW_ALL,(0,r.jsx)(Pe,{className:Ct().showMoreIcon})]})})})]})]})]})}):null}));var It=n(254580),Mt=n(979915),Zt=n(577573),Lt=n(610804),kt=n(831013),Dt=n.n(kt),Ft=n(640160),Ht=n.n(Ft),Ut=n(453904),Gt=n.n(Ut),Vt=n(17589),Bt=n.n(Vt);function zt(e){var t=e.onDismiss;return(0,r.jsxs)(G.Z,{onClick:function(){open(Ye.V8);(0,ae.GX)({readGuideCta:!0})},className:a()(Gt().container,Ht().container,Dt().mainCard),children:[(0,r.jsxs)("div",{className:Ht().inline,children:[(0,r.jsxs)("div",{className:Ht().author,children:[(0,r.jsx)(It.Z,{className:Ht().discordIcon}),(0,r.jsx)(v.xv,{variant:"text-sm/semibold",color:"header-primary",children:He.Z.Messages.DISCORD_NAME}),(0,r.jsxs)("div",{className:Ht().notice,
children:[(0,r.jsx)(Mt.Z,{className:Ht().infoIcon}),(0,r.jsx)(v.xv,{variant:"text-sm/normal",color:"header-secondary",children:He.Z.Messages.FORUM_HELPER_CARD_NOTICE})]})]}),(0,r.jsx)(G.Z,{onClick:function(e){e.stopPropagation();t(Lt.L.DISMISS);(0,ae.GX)({readGuideCta:!1})},children:(0,r.jsx)(be.Z,{className:Ht().closeIcon,width:16,height:16})})]}),(0,r.jsx)("hr",{className:Ht().separator}),(0,r.jsxs)("div",{className:Ht().inline,children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(v.X6,{className:a()(Gt().channelName,Ht().title),variant:"heading-lg/semibold",color:"header-primary",children:He.Z.Messages.FORUM_HELPER_CARD_TITLE}),(0,r.jsx)(v.xv,{variant:"text-sm/normal",color:"header-secondary",children:He.Z.Messages.FORUM_HELPER_CARD_BODY})]}),(0,r.jsx)("img",{src:Bt(),alt:He.Z.Messages.FORUM_HELPER_CARD_ALT_TEXT,width:Zt.TJ,height:Zt.TJ})]})]})}
var Wt=n(441143),Kt=n.n(Wt),qt=n(741655),Xt=n(159500),Yt=n(29189),$t=n(691869),Qt=n(476215),Jt=n(994858),en=n(431396),tn=n(251140),nn=n(640753),rn=n(825989),on=n(942604),an=n(66973),sn=n(159091),ln=n(940712),cn=n(429753),un=n(859023),dn=n(309494),fn=n(629620),hn=n(801593),gn=n(757987),mn=n(523283),pn=n(469282),vn=n(875389),yn=n(409830),bn=n(391595),On=n(56133),Sn=n(652455),Cn=n(824390),jn=n.n(Cn),xn=n(152163),En=n(392115),wn=n(392426),_n=n(752992),Pn=n.n(_n),Nn=function(e){var t=e.tag,n=t.id,i=t.name,o=t.emojiId,a=t.emojiName,s=(0,m.e7)([En.Z],(function(){return null!=o?En.Z.getUsableCustomEmojiById(o):null})),l=null!=o||null!=a;return(0,r.jsx)(wn.l,{value:n,children:(0,r.jsx)(wn.l.Label,{children:(0,r.jsxs)("div",{className:Pn().row,children:[l?(0,r.jsx)(xn.Z,{className:Pn().emoji,emojiId:o,emojiName:a,animated:Boolean(null==s?void 0:s.animated)}):(0,r.jsx)(vn.Z,{className:Pn().emoji}),(0,r.jsx)(v.xv,{variant:"text-md/semibold",color:"header-secondary",children:i})]})})},n)}
;function An(e){var t=e.parentChannel,n=e.appliedTags,i=e.maxTagsApplied,o=e.onSelectTag,a=e.onClose;return(0,r.jsx)(wn.Z,{showScrollbar:!0,value:n,onChange:function(e){if(!i||n.has(e)){o(e);a()}},placeholder:He.Z.Messages.FORUM_TAG_POST_SEARCH_PLACEHOLDER,"aria-label":He.Z.Messages.FORUM_TAG_POST_SEARCH_PLACEHOLDER,children:function(e){return(n=e,t.availableTags.filter((function(e){return jn()(n.toLowerCase(),e.name.toLowerCase())}))).map((function(e){return(0,r.jsx)(Nn,{tag:e},e.id)}));var n}})}var Tn=n(678081),Rn=n(39802),In=n(989346),Mn=n(935032);function Zn(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}function Ln(e,t){t=null!=t?t:{};Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})))
;n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}));return e}function kn(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++){n=o[r];t.indexOf(n)>=0||(i[n]=e[n])}return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++){n=o[r];t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}}return i}function Dn(e){var t=e.width,n=void 0===t?24:t,i=e.height,o=void 0===i?24:i,a=e.color,s=void 0===a?"currentColor":a,l=e.foreground,c=kn(e,["width","height","color","foreground"]);return(0,r.jsxs)("svg",Ln(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))))
;r.forEach((function(t){Zn(e,t,n[t])}))}return e}({},(0,Oe.Z)(c)),{width:n,height:o,viewBox:"0 0 24 24",fill:"none",children:[(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",className:l,d:"M13.2899 2H6C3.79086 2 2 3.79086 2 6V18C2 20.2091 3.79086 22 6 22H18C20.2091 22 22 20.2091 22 18V10.7101C21.3663 10.8987 20.695 11 20 11C16.134 11 13 7.86599 13 4C13 3.30503 13.1013 2.63371 13.2899 2ZM8 6C9.1032 6 10 6.8952 10 8C10 9.1056 9.1032 10 8 10C6.8944 10 6 9.1056 6 8C6 6.8952 6.8944 6 8 6ZM6 18L9 14L11 16L15 11L18 18H6Z",fill:s}),(0,r.jsx)("path",{d:"M21 0V3H24V5H21V8H19V5H16V3H19V0H21Z",fill:s})]}))}var Fn=n(725002),Hn=n(472622),Un=n.n(Hn);function Gn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Vn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{
for(n=n.call(e);!(a=(r=n.next()).done);a=!0){o.push(r.value);if(t&&o.length===t)break}}catch(e){s=!0;i=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Gn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Gn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Bn={scale:.95,opacity:0},zn={scale:1,opacity:1},Wn={scale:1,opacity:1},Kn={tension:2400,friction:52};function qn(e){var t=e.channelId,n=e.onClick,o=e.onClose,a=e.onMouseEnter,s=i.useRef(null),l=(0,m.e7)([k.Z],(function(){return k.Z.getChannel(t)}),[t]);Kt()(null!=l,"Forum Channel is null");return(0,r.jsxs)(G.Z,{
className:Un().uploadInput,onMouseEnter:a,onClick:function(){(0,ae.N3)({isMobile:!1});null==n||n()},children:[(0,r.jsx)(Tn.Z,{className:Un().fileInput,ref:s,onChange:function(e){null==o||o();(0,On.d)(e.currentTarget.files,l,D.d.FirstThreadMessage,{requireConfirm:!0});Me.S.dispatch(Fe.CkL.TEXTAREA_FOCUS);e.currentTarget.value=null},multiple:l.rateLimitPerUser<=0,tabIndex:-1,"aria-hidden":!0}),(0,r.jsx)(Dn,{width:28,height:28,className:Un().uploadIcon})]})}function Xn(e){var t=e.channelId,n=e.closePopout,o=Vn(i.useState(!1),2),a=o[0],s=o[1],l=i.useContext(Rn.S).reducedMotion,c=(0,ce.useSpring)({from:l.enabled?zn:Bn,to:Wn,config:Kn}),u=(0,m.e7)([ge.Z],(function(){return ge.Z.keyboardModeEnabled})),d=(0,m.e7)([F.Z],(function(){return F.Z.getUploads(t,$t.I.CREATE_FORUM_POST.drafts.type)}));return(0,r.jsx)(ce.animated.div,{className:Un().popoutContainer,onMouseLeave:function(){a||n()},style:c,children:(0,r.jsxs)(Fn.ZP,{orientation:"horizontal",className:Un().popout,paddingFix:!1,fade:!0,
children:[(0,r.jsx)(qn,{channelId:t,onClick:function(){s(!0)},onClose:function(){s(!1);n()}}),(0,r.jsx)("div",{className:Un().uploads,children:d.map((function(e){return(0,r.jsx)(Mn.Z,{channelId:t,draftType:$t.I.CREATE_FORUM_POST.drafts.type,upload:e,keyboardModeEnabled:u,hideFileName:!0,size:In.q.SMALL},e.id)}))})]})})}function Yn(e){var t=e.channelId,n=Vn(i.useState(!1),2),o=n[0],a=n[1],s=(0,m.e7)([F.Z],(function(){return F.Z.getUploads(t,$t.I.CREATE_FORUM_POST.drafts.type)})),l=s.length,c=l>0;i.useEffect((function(){o&&!c&&a(!1)}),[o,c]);var u=function(){c&&a(!0)};return(0,r.jsxs)("div",{className:Un().container,children:[c?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(Mn.r,{upload:s[0],size:In.q.SMALL,onMouseEnter:u}),!o&&(0,r.jsx)("div",{className:Un().badge,children:l})]}):(0,r.jsx)(qn,{onMouseEnter:u,channelId:t}),o&&(0,r.jsx)(Xn,{channelId:t,closePopout:function(){a(!1)}})]})}var $n=n(240709),Qn=n(305668),Jn=n(195123),er=n.n(Jn);function tr(e,t,n){t in e?Object.defineProperty(e,t,{
value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}function nr(e,t){t=null!=t?t:{};Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})));n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}));return e}const rr=function(e){var t=e.rateLimitPerUser,n=e.slowmodeCooldownGuess,i=e.isBypassSlowmode,o=e.leadingIcon,s=void 0!==o&&o,l="",c="";if(t>=Fe.UF9.HOUR){var u=Math.floor(t/Fe.UF9.HOUR),d=Math.floor((t-u*Fe.UF9.HOUR)/Fe.UF9.MINUTE),f=t-u*Fe.UF9.HOUR-d*Fe.UF9.MINUTE;c=He.Z.Messages.FORUM_SLOWMODE_DESC_HOURS.format({hours:u,minutes:d,seconds:f})}else if(t>=60){var h=Math.floor(t/60),g=t-60*h;c=He.Z.Messages.FORUM_SLOWMODE_DESC_MINUTES.format({minutes:h,seconds:g})
}else c=He.Z.Messages.FORUM_SLOWMODE_DESC.format({seconds:t});if(!i&&n>0){var m=le().duration(n);if(n>1e3*Fe.UF9.HOUR){var p="".concat(m.minutes()).padStart(2,"0"),y="".concat(m.seconds()).padStart(2,"0");l="".concat(m.hours(),":").concat(p,":").concat(y)}else{var b="".concat(m.seconds()).padStart(2,"0");l="".concat(m.minutes(),":").concat(b)}}else l=i?He.Z.Messages.CHANNEL_SLOWMODE_DESC_IMMUNE:He.Z.Messages.CHANNEL_SLOWMODE_DESC_SHORT;var O=(0,r.jsx)(v.xv,{variant:"text-sm/normal",color:"text-muted",children:l}),S=(0,r.jsx)(Qn.Z,{className:a()(er().slowModeIcon,tr({},er().leadingIcon,s))});return(0,r.jsx)(gn.ZP,{text:c,children:function(e){return(0,r.jsx)("div",nr(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))));r.forEach((function(t){tr(e,t,n[t])}))}return e
}({className:er().cooldownWrapper},e),{children:s?(0,r.jsxs)(r.Fragment,{children:[S,O]}):(0,r.jsxs)(r.Fragment,{children:[O,S]})}))}})};var ir=n(753274),or=n(468068);function ar(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function sr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done);a=!0){o.push(r.value);if(t&&o.length===t)break}}catch(e){s=!0;i=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ar(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ar(e,t)}(e,t)||function(){
throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var lr="undefined"==typeof ResizeObserver?ir.d:ResizeObserver,cr=new Map,ur=new lr((function(e){e.forEach((function(e){var t,n=e.target;null===(t=cr.get(n))||void 0===t||t(e)}))}));const dr=function(){var e=i.useRef(null),t=sr(i.useState(400),2),n=t[0],r=t[1],o=i.useCallback((function(){null!==e.current&&r(e.current.clientWidth)}),[r,e]);(0,or.zn)({ref:e,key:"forum-container",onUpdate:o,resizeObserver:ur,listenerMap:cr});return{containerRef:e,containerWidth:n}};var fr=n(35236),hr=n(977635),gr=n.n(hr);function mr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function pr(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(e){n(e);return}s.done?t(l):Promise.resolve(l).then(r,i)}function vr(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0
}):e[t]=n;return e}function yr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))));r.forEach((function(t){vr(e,t,n[t])}))}return e}function br(e,t){t=null!=t?t:{};Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})));n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}));return e}function Or(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){
var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done);a=!0){o.push(r.value);if(t&&o.length===t)break}}catch(e){s=!0;i=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return mr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return mr(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Sr=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){
if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;(r=0,i)&&(o=[2&o[0],i.value]);switch(o[0]){case 0:case 1:i=o;break;case 4:a.label++;return{value:o[1],done:!1};case 5:a.label++;r=o[1];o=[0];continue;case 7:o=a.ops.pop();a.trys.pop();continue;default:if(!(i=a.trys,i=i.length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1];i=o;break}if(i&&a.label<i[2]){a.label=i[2];a.ops.push(o);break}i[2]&&a.ops.pop();a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e];r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},Cr=$t.I.CREATE_FORUM_POST;function jr(e){var t=e.parentChannel,n=e.isSearchLoading,o=e.onChange,s=e.canCreatePost,l=(0,Xe.xH)((function(e){return{textAreaState:e.textAreaState,formOpen:e.formOpen}
}),c.Z),u=l.textAreaState,d=l.formOpen,f=Or(i.useState(null),2),h=f[0],g=f[1],p=i.useContext(Y.oo),v=i.useCallback((function(){p.bumpDispatchPriority()}),[p]),y=(0,m.e7)([ln.Z],(function(){return ln.Z.can(Fe.Plq.ATTACH_FILES,t)})),b=(0,m.Wu)([F.Z],(function(){return F.Z.getUploads(t.id,D.d.FirstThreadMessage)})),O=function(e){var t=(0,Xe.AF)(),n=(0,te.ql)(e),r=i.useRef(null),o=i.useCallback((function(){var i=t.getState(),o=i.formOpen,a=i.setFormOpenFromUserAction,s=i.name,l=i.textAreaState,c=i.hasClickedForm;if(!o){setTimeout((function(){if(r.current instanceof fn.Z){var e,t,n,i;null===(e=r.current)||void 0===e||null===(t=e._textArea)||void 0===t||t.setSelectionRange(s.length,s.length);null===(n=r.current)||void 0===n||null===(i=n._textArea)||void 0===i||i.focus()}}),0);(c&&s.length>0||l.textValue.trim().length>0&&l.textValue.trim()!==n||F.Z.getUploads(e.id,D.d.FirstThreadMessage).length>0)&&a()}}),[t,e.id,n]);return{inputRef:r,handleClick:o}
}(t),S=O.inputRef,C=O.handleClick,j=function(e){var t=(0,Xe.xH)((function(e){return{formOpen:e.formOpen}}),c.Z).formOpen,n=(0,Xe.AF)(),r=(0,m.e7)([ve.Z],(function(){return ve.Z.getGuild(e.guild_id)})),o=(0,sn.r)({parentChannel:e,guild:r});i.useEffect((function(){var e=n.getState(),t=e.setNameError,r=e.setMessageError;t(null);r(null)}),[t,n]);var a=i.useCallback((function(t,r,i){var o=n.getState(),a=o.name,s=o.textAreaState;null==t&&(t=s.textValue);t=t.trim();t=nn.ZP.parse(e,t).content;if(null==r||0===r.length){var l;r=null===(l=rn.Z.getStickerPreview(e.id,Cr.drafts.type))||void 0===l?void 0:l.map((function(e){return e.id}))}null!=i&&0!==i.length||(i=F.Z.getUploads(e.id,D.d.FirstThreadMessage));return{content:t,stickers:r,uploads:i,hasNameError:0===a.length,hasMessageError:!(null!=t&&0!==t.length||null!=r&&0!==r.length||0!==i.length)}}),[e,n]);return i.useCallback((l=(s=function(t,r,i){var s,l,c,u,d,f,h,g,m,p,v,y,b,O,S,C,j,x,E,w;return Sr(this,(function(_){switch(_.label){case 0:
s=n.getState(),l=s.setNameError,c=s.setMessageError,u=s.setSubmitting,d=s.resetFormState,f=s.formOpen,h=s.setFormOpen,g=s.setFormOpenFromUserAction,m=s.setGuidelinesOpen;p=Sn.Z.hasSeen(e.id);if(!f){(0,ae.P_)({guildId:e.guild_id,channelId:e.id});p||n.getState().setGuidelinesOpen(!0);g();return[2,{shouldClear:!1,shouldRefocus:!1}]}v=a(t,r,i),y=v.content,b=v.stickers,O=v.uploads,S=v.hasNameError,C=v.hasMessageError;l(S?Xe.D1.Empty:null);c(C?Xe.D1.Empty:null);if(S||C)return[2,{shouldClear:!1,shouldRefocus:!0}];_.label=1;case 1:_.trys.push([1,4,5,6]);u(!0);return[4,(0,bn.v)({content:y,stickers:b,uploads:O,type:Cr,channel:e})];case 2:return _.sent().valid?[4,o(y,b,O)]:[2,{shouldClear:!1,shouldRefocus:!0}];case 3:j=_.sent();(0,M.ok)(j);Q.Z.resort(e.id);(0,on.qB)(e.id,Cr.drafts.type);d();h(!1);Sn.Z.markAsSeen(e.id);m(!1);return[2,{shouldClear:!0,shouldRefocus:!1}];case 4:x=_.sent();(null===(E=x.body)||void 0===E?void 0:E.code)===Fe.evJ.AUTOMOD_TITLE_BLOCKED&&l(Xe.D1.AutoMod)
;(null===(w=x.body)||void 0===w?void 0:w.code)===Fe.evJ.AUTOMOD_MESSAGE_BLOCKED&&c(Xe.D1.AutoMod);return[2,{shouldClear:!1,shouldRefocus:!0}];case 5:u(!1);return[7];case 6:return[2]}}))},function(){var e=this,t=arguments;return new Promise((function(n,r){var i=s.apply(e,t);function o(e){pr(i,n,r,o,a,"next",e)}function a(e){pr(i,n,r,o,a,"throw",e)}o(void 0)}))}),function(e,t,n){return l.apply(this,arguments)}),[o,a,e,n]);var s,l}(t);i.useLayoutEffect(o,[d,u,b,o]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(Yt.Z,{channel:t,draftType:D.d.FirstThreadMessage}),(0,r.jsx)("div",{"aria-label":s?He.Z.Messages.NEW_FORUM_POST:He.Z.Messages.SEARCH,className:a()(gr().container,vr({},gr().collapsed,!d)),onClick:!d&&s?C:void 0,children:(0,r.jsxs)("form",{onMouseDown:v,onFocus:v,onSubmit:function(e){e.preventDefault();s&&j()},children:[(0,r.jsxs)("div",{className:gr().formContainer,children:[(0,r.jsxs)("div",{className:gr().form,children:[(0,r.jsx)(Er,{editorRef:h,parentChannel:t,
isSearchLoading:n,inputRef:S,canCreatePost:s}),d&&(0,r.jsx)(_r,{editorRef:h,setEditorRef:g,parentChannel:t,submit:j,disabled:!s})]}),d&&y&&s&&(0,r.jsx)(Yn,{channelId:t.id})]}),(0,r.jsx)("div",{className:gr().form,children:d&&(0,r.jsx)(Pr,{parentChannel:t,canCreatePost:s})})]})})]})}var xr=new Set(["\\",'"',"#",":","/","@","<",">"]),Er=i.memo((function(e){var t=e.parentChannel,n=e.isSearchLoading,o=e.inputRef,a=e.canCreatePost,s=e.editorRef,l=(0,Xe.xH)((function(e){return{formOpen:e.formOpen,nameError:e.nameError,name:e.name,textAreaState:e.textAreaState,hasClickedForm:e.hasClickedForm,submitting:e.submitting}}),c.Z),u=l.formOpen,d=l.nameError,f=l.name,h=l.textAreaState,g=l.hasClickedForm,p=l.submitting,v=(0,Xe.AF)(),y=null!=t.topic&&0!==t.topic.length,b=Sn.Z.hasSeen(t.id),O=(0,te.ql)(t),S=(0,m.e7)([un.default],(function(){return un.default.getCurrentUser()}));Kt()(null!=S,"current user cannot be null");(0,Y.yp)({event:Fe.CkL.FOCUS_COMPOSER_TITLE,handler:function(){
var e,t=o.current instanceof fn.Z?null===(e=o.current)||void 0===e?void 0:e._textArea:o.current;null==t||t.focus();v.getState().setTitleFocused(!0);v.getState().setFormOpen(!0);v.getState().setHasClickedForm(!0)}});var C=i.useCallback((function(){var e;v.getState().resetFormState();qt.Z.clearDraft(t.id,D.d.ThreadSettings);qt.Z.clearDraft(t.id,D.d.FirstThreadMessage);Xt.Z.clearAll(t.id,D.d.FirstThreadMessage);v.getState().setFormOpen(!1);v.getState().setBodyFocused(!1);v.getState().setTitleFocused(!1);v.getState().setHasClickedForm(!1);null===(e=o.current)||void 0===e||e.blur();(0,ae.Oq)({guildId:t.guild_id,channelId:t.id})}),[v,t.id,t.guild_id,o]),j=i.useMemo((function(){return n&&!u?(0,r.jsx)(Tr,{}):n||u||0!==h.textValue.trim().length&&h.textValue.trim()!==O?!u&&(f.trim().length>0||h.textValue.trim().length>0&&h.textValue.trim()!==O||F.Z.getUploads(t.id,D.d.FirstThreadMessage).length>0)&&g?(0,r.jsx)(Ot.Z,{className:gr().pencilIcon,width:24,height:24}):p?(0,r.jsx)(mn.Z,{
className:gr().closeIconDisabled,width:24,height:24}):(0,r.jsx)(G.Z,{onClick:C,children:(0,r.jsx)(gn.ZP,{text:He.Z.Messages.FORUM_CLEAR_ALL,children:function(e){return(0,r.jsx)(mn.Z,br(yr({},e),{className:gr().closeIcon,width:24,height:24}))}})}):(0,r.jsx)(pn.Z,{className:gr().searchIcon,width:24,height:24})}),[n,u,g,f,h.textValue,C,t.id,O,p]),x=i.useCallback((function(e){var n=e.clipboardData.files[0];if(null!=n&&n.type.startsWith("image/")){e.preventDefault();(0,On.d)([n],t,D.d.FirstThreadMessage);v.getState().setFormOpenFromUserAction()}}),[t,v]);return(0,r.jsxs)("div",{className:gr().titleContainer,onPaste:x,children:[(0,r.jsx)("div",{className:gr().prefixElement,children:j}),(0,r.jsx)(dn.Z,{value:f,placeholder:a?u||h.textValue.length>0&&h.textValue.trim()!==O?He.Z.Messages.FORUM_POST_TITLE_PLACEHOLDER_FOCUSED:He.Z.Messages.FORUM_POST_TITLE_PLACEHOLDER_SEARCH:He.Z.Messages.SEARCH,flex:!0,autosize:u,rows:1,showCharacterCount:!1,showRemainingCharacterCount:!1,maxLength:Fe.HN8,
onChange:function(e){var n=(0,an.Z)(e,!1);v.getState().setName(n);var r=0===n.trim().length,i=0===h.textValue.trim().length,o=h.textValue.trim()===O;r&&(i||o)&&v.getState().setHasClickedForm(!1);u||Q.Z.updateForumSearchQuery(t.id,n)},onFocus:function(){v.getState().setTitleFocused(!0);v.getState().setBodyFocused(!1)},onBlur:function(){v.getState().setTitleFocused(!1);var e=(0,an.Z)(f,!0);if(e!==f){v.getState().setName(e);u||Q.Z.updateForumSearchQuery(t.id,e)}},onKeyDown:function(e){var n;if(xr.has(e.key)){e.preventDefault();e.stopPropagation()}else{if("Enter"===e.key){e.preventDefault();e.stopPropagation();if(u&&f.length>0)null==s||s.focus();else if(a&&e.shiftKey){(0,ae.nH)({guildId:t.guild_id,channelId:t.id});y&&!b&&v.getState().setGuidelinesOpen(!0);v.getState().setFormOpenFromUserAction();if(f.trim().length>0){v.getState().setBodyFocused(!0);null==s||s.focus()}}}var r=o.current instanceof fn.Z?null===(n=o.current)||void 0===n?void 0:n._textArea:o.current
;if("Home"===e.key||"End"===e.key){if(null==r)return;e.preventDefault();e.stopPropagation();if("Home"===e.key)r.setSelectionRange(0,0);else{var i=f.length;r.setSelectionRange(i,i)}}if("Escape"===e.key&&!v.getState().submitting){var l;null===(l=o.current)||void 0===l||l.blur();v.getState().setFormOpen(!1);v.getState().setTitleFocused(!1);v.getState().setBodyFocused(!1)}}},error:d===Xe.D1.AutoMod?He.Z.Messages.FORUM_POST_AUTOMOD_ERROR:d===Xe.D1.Empty&&0===f.trim().length?He.Z.Messages.FORUM_POST_EMPTY_TITLE_ERROR:null,className:gr().title,inputRef:o}),u?null:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(wr,{parentChannel:t}),(0,r.jsx)(Nr,{parentChannel:t,canCreatePost:a})]})]})}));function wr(e){var t=e.parentChannel,n=(0,Xe.xH)((function(e){return{guidelinesOpen:e.guidelinesOpen}})).guidelinesOpen,i=(0,Xe.AF)(),o=null!=t.topic&&0!==t.topic.length,s=function(){i.getState().setGuidelinesOpen(!n)};return o?(0,r.jsx)(gn.ZP,{text:He.Z.Messages.FORUM_POST_GUIDELINES_TITLE,children:function(e){
return(0,r.jsx)(G.Z,br(yr({},e),{onClick:s,className:a()(gr().guidelinesButton,vr({},gr().guidelinesOpen,n)),children:(0,r.jsx)(bt.Z,br(yr({},e),{width:24,height:24}))}))}}):null}var _r=i.memo((function(e){var t=e.parentChannel,n=e.submit,o=e.disabled,s=void 0!==o&&o,l=e.editorRef,u=e.setEditorRef,d=(0,m.e7)([un.default],(function(){return un.default.getCurrentUser()}));Kt()(null!=d,"current user cannot be null");var f=(0,Xe.xH)((function(e){return{messageError:e.messageError,textAreaState:e.textAreaState,bodyFocused:e.bodyFocused,formOpen:e.formOpen}}),c.Z),h=f.messageError,g=f.textAreaState,p=f.bodyFocused,v=f.formOpen,y=(0,Xe.AF)();i.useEffect((function(){return function(){return(0,ae.Vn)({guildId:t.guild_id,channelId:t.id})}}),[t.guild_id,t.id]);var b=i.useCallback((function(){y.getState().setBodyFocused(!0)}),[y]),O=i.useCallback((function(){y.getState().setBodyFocused(!1)}),[y]),S=i.useCallback((function(e,t,n){(0,y.getState().setTextAreaState)({textValue:t,richValue:n})
}),[y]),C=i.useCallback((function(e){var t=e.value,r=e.uploads,i=e.stickers;return n(t,i,r)}),[n]);(0,Y.yp)({event:Fe.CkL.TEXTAREA_FOCUS,handler:b});(0,Y.yp)({event:Fe.CkL.TEXTAREA_BLUR,handler:O});var j=h===Xe.D1.Empty&&0===g.textValue.trim().length,x=h===Xe.D1.AutoMod||j;return(0,r.jsx)("div",{className:gr().bodyContainer,children:(0,r.jsxs)("div",{className:gr().contentContainer,children:[(0,r.jsx)("div",{onClick:b,children:(0,r.jsx)(Jt.Z,{type:Cr,setEditorRef:u,channel:t,placeholder:He.Z.Messages.FORUM_POST_MESSAGE_PLACEHOLDER,textValue:g.textValue,richValue:g.richValue,focused:p,className:gr().channelTextArea,innerClassName:a()(gr().channelTextAreaInner,vr({},gr().channelTextAreaInnerError,x)),onChange:S,onSubmit:C,promptToUpload:On.d,disabled:s,onKeyDown:function(e){"ArrowUp"!==e.key&&"ArrowDown"!==e.key||e.stopPropagation();if("Home"===e.key||"End"===e.key){if(null==l)return;e.preventDefault();e.stopPropagation();var t=l.getSlateEditor();if(null==t)return
;"Home"===e.key?tn.Q.resetSelectionToStart(t):tn.Q.resetSelectionToEnd(t)}if(v&&"Escape"===e.key&&!y.getState().submitting){null==l||l.blur();y.getState().setFormOpen(!1);y.getState().setTitleFocused(!1);y.getState().setBodyFocused(!1)}},autoCompletePosition:yn.vK.BOTTOM})}),(0,r.jsx)(hn.jj,{error:h===Xe.D1.AutoMod?He.Z.Messages.FORUM_POST_AUTOMOD_ERROR:j?He.Z.Messages.FORUM_POST_EMPTY_MESSAGE_ERROR:null})]})})})),Pr=i.memo((function(e){var t=e.parentChannel,n=e.canCreatePost,o=(0,Xe.xH)((function(e){return{textAreaState:e.textAreaState,appliedTags:e.appliedTags,name:e.name}})),a=o.textAreaState,s=o.appliedTags,l=o.name,c=t.rateLimitPerUser,u=c>0,d=(0,m.e7)([cn.Z],(function(){return cn.Z.getSlowmodeCooldownGuess(t.id,cn.S.CreateThread)})),f=(0,m.e7)([ln.Z],(function(){return ln.Z.can(Fe.Plq.MANAGE_THREADS,t)||ln.Z.can(Fe.Plq.MANAGE_CHANNELS,t)})),h=t.hasFlag(fr.zZ.REQUIRE_TAG)&&0===s.size&&l.length>0&&a.textValue.length>0,g=(0,Xe.AF)(),p=i.useCallback((function(){
g.getState().setBodyFocused(!1)}),[g]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(Ar,{parentChannel:t}),(0,r.jsx)("div",{className:gr().tagsDivider}),(0,r.jsxs)("div",{className:gr().controlsContainer,children:[(0,r.jsxs)("div",{className:gr().controls,children:[(0,r.jsxs)("div",{className:gr().wrappedControls,children:[h&&(0,r.jsx)(v.xv,{variant:"text-sm/normal",color:"text-danger",children:He.Z.Messages.FORUM_POST_TAG_REQUIRED_ERROR}),(0,r.jsx)(en.Z,{type:Cr,textValue:a.textValue,className:gr().characterCount}),u&&(0,r.jsx)(rr,{rateLimitPerUser:c,slowmodeCooldownGuess:d,isBypassSlowmode:f,leadingIcon:!0})]}),(0,r.jsx)(wr,{parentChannel:t}),(0,r.jsx)(Nr,{parentChannel:t,disableIfInvalid:!0,canCreatePost:n,disabled:u&&!f&&d>0})]}),(0,r.jsx)(Qt.Z,{type:Cr,className:gr().expressionPicker,onClick:p},"expression")]})]})}));function Nr(e){var t=e.parentChannel,n=e.canCreatePost,i=e.disabled,o=e.disableIfInvalid,a=void 0!==o&&o,s=(0,Xe.xH)((function(e){return{submitting:e.submitting,
textAreaState:e.textAreaState,name:e.name,appliedTags:e.appliedTags,formOpen:e.formOpen}})),l=s.submitting,c=s.textAreaState,u=s.name,d=s.appliedTags,f=s.formOpen,h=!(t.hasFlag(fr.zZ.REQUIRE_TAG)&&0===d.size&&u.length>0&&c.textValue.length>0)&&c.textValue.trim().length>0&&u.trim().length>0;if(__OVERLAY__)return null;var g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,r.jsxs)(U.Co,br(yr({},e),{size:U.Co.Sizes.SMALL,className:gr().submitButton,innerClassName:gr().submitButtonInner,type:"submit",submitting:l,disabled:a&&!h||i||!n,children:[(0,r.jsx)(ke.Z,{className:gr().submitIcon,width:16,height:16}),(0,r.jsx)(v.xv,{variant:"text-md/semibold",color:"none",children:f?He.Z.Messages.SUBMIT_POST:He.Z.Messages.NEW_FORUM_POST_NEW})]}))};return n?g():(0,r.jsx)(gn.ZP,{text:He.Z.Messages.FORUM_NO_POST_PERMISSION_HELP,children:function(e){return g(e)}})}function Ar(e){var t=e.parentChannel,n=(0,Xe.xH)((function(e){return{appliedTags:e.appliedTags,
toggleAppliedTag:e.toggleAppliedTag,setPopoutOpen:e.setPopoutOpen}}),c.Z),o=n.appliedTags,s=n.toggleAppliedTag,l=n.setPopoutOpen,u=o.size>=Ye.Cn,d=dr(),f=d.containerRef,h=d.containerWidth,g=i.useRef(null),m=Or(i.useState(!0),2),p=m[0],v=m[1],y=(0,te.Vm)(t),b=Or(i.useState(0),2),O=b[0],S=b[1];i.useLayoutEffect((function(){var e,t=g.current,n=null==t||null===(e=t.children)||void 0===e?void 0:e[0],r=null==t||null==n||n.clientHeight>t.clientHeight;r!==p&&v(r);if(r&&null!=f.current&&null!=n&&null!=n.children){var i=f.current.getBoundingClientRect(),o=i.left,a=i.top,s=0,l=!0,c=!1,u=void 0;try{for(var d,h=n.children[Symbol.iterator]();!(l=(d=h.next()).done);l=!0){var m=d.value.getBoundingClientRect(),y=m.right;if(m.top-a>m.height)break;y-o>s&&(s=y-o)}}catch(e){c=!0;u=e}finally{try{l||null==h.return||h.return()}finally{if(c)throw u}}S(s)}}),[y,p,f,h]);return 0===y.length?null:(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("div",{className:gr().tagsContainer,ref:f,children:[(0,r.jsx)(vn.Z,{
className:gr().tagsIcon,width:16,height:16}),(0,r.jsx)("div",{className:gr().tagList,ref:g,children:(0,r.jsx)("div",{className:gr().tagListInner,children:y.map((function(e){return(0,r.jsx)($n.Z,{tag:e,onClick:u&&!o.has(e.id)?void 0:function(){return s(e.id)},disabled:!o.has(e.id)&&o.size>=Ye.Cn,selected:o.has(e.id),size:$n.Z.Sizes.SMALL},e.id)}))})}),p&&(0,r.jsx)(V.ZP,{onRequestOpen:function(){return l(!0)},onRequestClose:function(){return l(!1)},renderPopout:function(e){var n=e.closePopout;return(0,r.jsx)(An,{parentChannel:t,appliedTags:o,maxTagsApplied:u,onSelectTag:s,onClose:n})},position:V.ZP.Positions.BOTTOM,align:V.ZP.Align.CENTER,children:function(e){return(0,r.jsxs)(U.Co,br(yr({},e),{size:U.Co.Sizes.TINY,className:gr().tagsButton,innerClassName:gr().tagsButtonInner,style:{left:O},look:U.Co.Looks.LINK,"aria-label":He.Z.Messages.ADD_TAG_FORUM_POST,children:[He.Z.Messages.FORUM_TAG_SEE_MORE,(0,r.jsx)(B.Z,{width:16})]}))}}),(0,r.jsxs)(U.Co,{size:U.Co.Sizes.TINY,
className:a()(gr().tagsButton,gr().tagsButtonPlaceholder),innerClassName:gr().tagsButtonInner,look:U.Co.Looks.LINK,"aria-label":He.Z.Messages.ADD_TAG_FORUM_POST,children:[He.Z.Messages.FORUM_TAG_SEE_MORE,(0,r.jsx)(B.Z,{width:16})]})]})})}function Tr(e){var t=e.style,n=e.className;return(0,r.jsx)("div",{className:n,style:t,children:(0,r.jsx)("div",{className:gr().loader})})}var Rr,Ir=n(451964),Mr=n(884021),Zr=n(832010),Lr=n(382394),kr=n(866358),Dr=n(409271),Fr=n(691692),Hr=n(966303),Ur=n(535093),Gr=n(911016),Vr=n(10178),Br=n(410150),zr=n(43016),Wr=n(122768),Kr=n(334282),qr=n(674455),Xr=n(553494),Yr=n(5387),$r=n.n(Yr),Qr="absolute";!function(e){e[e.COVER=1]="COVER";e[e.CONTAIN=2]="CONTAIN";e[e.CONTAIN_STRETCHED=3]="CONTAIN_STRETCHED"}(Rr||(Rr={}));var Jr=function(e,t,n,r){if(0===n)return[];if(1===n)return[{width:e,height:t,top:0,left:0,position:Qr}];if(2===n){var i=Math.ceil((e-r)/2);return[{top:0,left:0,position:Qr,width:i,height:t},{top:0,left:i+r,position:Qr,width:i,height:t}]}
if(3===n){var o=Math.ceil((e-r)/2),a=Math.ceil((t-r)/2);return[{top:0,left:0,position:Qr,width:o,height:t},{top:0,left:o+r,position:Qr,width:o,height:a},{top:a+r,left:o+r,position:Qr,width:o,height:a}]}var s=Math.ceil((e-r)/2),l=Math.ceil((t-r)/2);return[{top:0,left:0,position:Qr,width:s,height:l},{top:l+r,left:0,position:Qr,width:s,height:l},{top:0,left:s+r,position:Qr,width:s,height:l},{top:l+r,left:s+r,position:Qr,width:s,height:l}]};var ei=new($r())({max:100});function ti(e){var t=e.numAttachments,n=e.containerWidth,r=e.containerHeight;return i.useMemo((function(){return function(e){var t=e.numAttachments,n=e.containerWidth,r=e.containerHeight,i=function(e,t,n){return"".concat(e,"-").concat(t,"-").concat(n)}(t,n,r),o=ei.get(i);if(null!=o)return o;var a=Jr(n,r,t,2);ei.set(i,a);return a}({numAttachments:t,containerWidth:n,containerHeight:r})}),[t,n,r])}function ni(e){return e.map((function(t,n){return{minWidth:2*e[n].width,minHeight:2*e[n].height,maxWidth:2*e[n].width,
maxHeight:2*e[n].height}}))}const ri=(0,Xr.B)({kind:"user",id:"2022-11_grid_view_image_fitting_strategy",label:"Grid View Media Fitting Strategy",defaultConfig:{strategy:Rr.COVER},treatments:[{id:1,label:"CONTAIN",config:{strategy:Rr.CONTAIN}},{id:2,label:"CONTAIN_STRETCHED",config:{strategy:Rr.CONTAIN_STRETCHED}}]});var ii=function(){function e(t){var n=t.minWidth,r=t.maxWidth,i=t.gap;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);Kt()(n<r,"minWidth needs to be smaller than maxWidth");this.minWidth=n;this.maxWidth=r;this.gap=i}var t=e.prototype;t.getWidth=function(e){return this.getRenderOptions(e).columnWidth};t.getRenderOptions=function(e){if(e<=this.minWidth)return{columns:1,columnWidth:this.minWidth};var t=e/this.maxWidth,n=e/this.minWidth,r=Math.max(Math.floor(t+(n-t)/2),1);return{columns:r,columnWidth:(e-this.gap*(r-1))/r}};return e}(),oi={columns:1,columnWidth:450},ai=function(e){var t=e-2
;return[t,Math.ceil(.6666666666666666*t)]},si=function(e){return 60+ai(e-24)[1]+24+36},li=n(224963),ci=n(732151),ui=n(30968),di=n(752675),fi=n(651720),hi=n.n(fi);function gi(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function mi(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}function pi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))));r.forEach((function(t){mi(e,t,n[t])}))}return e}function vi(e,t){t=null!=t?t:{};Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){
return Object.getOwnPropertyDescriptor(e,t).enumerable})));n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}));return e}function yi(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++){n=o[r];t.indexOf(n)>=0||(i[n]=e[n])}return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++){n=o[r];t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}}return i}function bi(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done);a=!0){o.push(r.value);if(t&&o.length===t)break}}catch(e){s=!0;i=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}(e,t)||function(e,t){if(!e)return
;if("string"==typeof e)return gi(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return gi(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}const Oi=i.memo((function(e){var t=e.threadId,n=e.gotoThread,i=e.overrideMedia,o=e.className,a=e.coords,s=e.observePostVisibilityAnalytics,l=(0,m.e7)([k.Z],(function(){return k.Z.getChannel(t)}));return null==l?null:(0,r.jsx)(Si,{channel:l,gotoThread:n,overrideMedia:i,className:o,coords:a,observePostVisibilityAnalytics:s})}));function Si(e){var t=e.channel,n=e.gotoThread,o=e.overrideMedia,s=e.className,l=e.coords,c=e.observePostVisibilityAnalytics,u=t.id,f=i.useRef(null),h=(0,m.e7)([L.ZP],(function(){
return L.ZP.getCurrentSidebarChannelId(t.parent_id)===t.id})),g=(0,Kr.c)(t),p=g.firstMessage,y=g.loaded,b=(0,te.n6)({firstMessage:p,formatInline:!1,noStyleAndInteraction:!1}).firstMedia,O=null!=o?o:b,S=(0,te.nP)(t).messageCount,C=(0,te.J$)(t),j=C.isNew,x=C.hasUnreads,E=i.useRef(null),w=(0,di.Z)({facepileRef:E,gotoThread:n,channel:t}),_=w.handleLeftClick,P=w.handleRightClick;i.useEffect((function(){null==c||c(f.current,u)}),[c,u]);var N=(0,d.JA)(u),A=(N.role,N.onFocus),T=yi(N,["role","onFocus"]),R=(0,ui.Z)(A),I=R.isFocused,M=R.handleFocus,Z=R.handleBlur,k=(0,m.e7)([ln.Z],(function(){return ln.Z.can(Fe.Plq.MANAGE_MESSAGES,t)})),D=Dr.QK.useSetting(),F=Dr.cC.useSetting(),H=(0,Lr.Z)(F,k),U=(0,qr.zy)(p,!1),V=bi(ai(l.width-24),2),B=V[0],z=V[1],W=(0,te.xw)(t,Ir.z.CREATION_DATE,Ye.R6.POSTED_DURATION_AGO),K=(0,Zt.NN)(t),q=(null==p?void 0:p.blocked)||null==O,X=x?"header-primary":"text-muted";return(0,r.jsxs)("li",{ref:f,"data-item-id":u,"data-item-role":"item",onClick:_,onContextMenu:P,
className:a()(hi().container,s,mi({},hi().isOpen,h)),style:pi({},l),children:[(0,r.jsx)(G.Z,pi({onClick:_,focusProps:{ringTarget:f},onContextMenu:P,"aria-label":He.Z.Messages.FORUM_POST_ARIA_LABEL.format({title:t.name,count:S}),className:hi().focusTarget,onFocus:M,onBlur:Z},T)),(0,r.jsxs)("div",{className:hi().header,children:[(0,r.jsxs)("div",{className:hi().authorRow,children:[(0,r.jsxs)("div",{className:hi().rowGroup,children:[(0,r.jsx)(li.Z,{channel:t,message:p}),(0,r.jsx)(v.xv,{variant:"text-xs/normal",color:"header-secondary",className:hi().postCreationTimestamp,children:W})]}),j?(0,r.jsx)(Ie.IG,{className:a()(hi().newBadge),color:(0,Zr.Lq)(Fe.Ilk.BRAND_260),text:He.Z.Messages.NEW}):null]}),(0,r.jsx)(v.y5,{children:(0,r.jsx)(v.X6,{variant:"heading-md/extrabold",className:hi().title,color:X,style:{width:"".concat(l.width-24,"px")},children:K})})]}),(0,r.jsx)("div",{className:hi().postBody,children:q?(0,r.jsx)(_i,{channel:t,firstMessage:p,isFirstMessageLoaded:y,
containerWidth:l.width,hasUnreads:x}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(Ei,{mediaAttachments:U,globalSpoilerRenderSetting:H,containerWidth:B,containerHeight:z,canAutoPlay:D}),(0,r.jsx)(Fr.Z,{enabled:!I,children:(0,r.jsx)("div",{className:hi().tagsRow,children:(0,r.jsx)(ci.Z,{channel:t,tagsClassName:hi().tagPill})})})]})}),(0,r.jsx)("div",{className:hi().footer,children:(0,r.jsx)(Fr.Z,{enabled:!I,children:(0,r.jsx)(Ci,{channel:t,firstMessage:p,facepileRef:E})})})]})}function Ci(e){var t=e.channel,n=e.facepileRef,i=e.firstMessage,o=(0,te.Q)(t),a=null!=(null==i?void 0:i.reactions)&&i.reactions.length>0;return(0,r.jsxs)("div",{className:hi().forumPostControls,children:[(0,r.jsxs)("div",{className:hi().controlsGroup,children:[(0,r.jsx)("div",{className:hi().messageCountContainer,children:(0,r.jsx)(Zt.m9,{channel:t,iconSize:16})}),o.length>0?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{className:hi().bullet,children:"•"}),(0,r.jsxs)("div",{className:hi().typing,children:[(0,
r.jsx)(Zt.og,{channel:t,userIds:o,facepileRef:n}),(0,r.jsx)("div",{className:hi().dots,children:(0,r.jsx)(Wr.Z,{themed:!0,dotRadius:2})}),(0,r.jsx)(Mr.Z,{channel:t,className:hi().typingUsers,renderDots:!1})]})]}):null]}),(0,r.jsxs)("div",{className:hi().controlsGroup,children:[a||null==i?null:(0,r.jsx)(Zt.kZ,{firstMessage:i,channel:t}),null==i?null:(0,r.jsx)(Zt.au,{firstMessage:i,channel:t})]})]})}var ji=function(e){return e.preventDefault()},xi=i.memo((function(e){return(0,r.jsx)(r.Fragment,{children:(0,kr.Yi)(e)})})),Ei=i.memo((function(e){var t=e.mediaAttachments,n=e.globalSpoilerRenderSetting,o=e.containerWidth,s=e.containerHeight,l=e.canAutoPlay,c=i.useMemo((function(){return(0,qr.cp)(t)}),[t]),u=c.containsVideo,d=c.containsGif,f=ri.useExperiment({}).strategy,h=i.useMemo((function(){return t.slice(0,4)}),[t]),g=ti({numAttachments:h.length,containerWidth:o,containerHeight:s}),m=function(e){
var t=e.imageContainerStyles,n=e.containerWidth,r=e.containerHeight,o=i.useRef(ni(t)),a=i.useRef(n),s=i.useRef(r),l=n>a.current+100,c=r>s.current+100;(l||c)&&(o.current=ni(t));return o.current}({imageContainerStyles:g,containerWidth:o,containerHeight:s}),p=i.useMemo((function(){switch(f){case Rr.CONTAIN:return hi().imageContain;case Rr.CONTAIN_STRETCHED:return hi().imageContainStretched;default:return hi().imageCover}}),[f]),v=i.useMemo((function(){return h.map((function(e,t){var i=e.spoiler&&!n,o=vi(pi({},m[t]),{src:e.src,width:e.width,height:e.height,alt:null!=e.alt&&i?He.Z.Messages.SPOILER_HIDDEN_A11Y_LABEL:e.alt,onClick:ji,shouldRenderAccessory:!d&&!u});return(0,r.jsxs)("div",{className:hi().bodyMediaFrame,style:g[t],children:[e.src.startsWith("data:")?(0,r.jsx)(Hr.Z,vi(pi({},o),{className:hi().mediaContainer,imageClassName:a()(hi().thumbnailOverride,mi({},hi().spoiler,i))})):(0,r.jsx)(xi,vi(pi({},o),{autoPlay:l,containerClassName:hi().mosaicMediaContainer,
imageClassName:a()(p,mi({},hi().spoiler,i)),responsive:!0})),i&&(0,r.jsx)("div",{className:hi().spoilerTagContainer,children:(0,r.jsx)(Br.Z,{className:hi().spoilerTag})})]},e.src)}))}),[l,d,u,n,g,m,p,h]);return(0,r.jsxs)("div",{className:hi().bodyMedia,style:{width:o,height:s},children:[(0,r.jsx)(r.Fragment,{children:v}),(d||u)&&(0,r.jsxs)("div",{className:hi().mediaIconsRow,children:[u&&(0,r.jsx)(Vr.Z,{width:"22px",height:"22px",className:hi().mediaIcon}),d&&(0,r.jsx)(Ur.Z,{className:hi().mediaIcon})]}),t.length>4&&(0,r.jsx)(wi,{text:(t.length-4).toString(),icon:Gr.Z,pillClassName:hi().moreImagesPill,iconClassName:hi().moreImagesPillIcon,textClassName:hi().moreImagesPillText})]})}));function wi(e){var t=e.text,n=e.icon,i=e.pillClassName,o=e.iconClassName,a=e.textClassName;return(0,r.jsxs)("div",{className:i,children:[(0,r.jsx)(n,{className:o}),(0,r.jsxs)(v.xv,{variant:"text-xs/medium",className:a,children:["+",t]})]})}function _i(e){
var t=e.channel,n=e.firstMessage,o=e.isFirstMessageLoaded,s=e.containerWidth,l=e.hasUnreads,c=bi(ai(s-24),2),u=c[0],d=c[1],f=(0,te.n6)({firstMessage:n,formatInline:!1,noStyleAndInteraction:!0}).content,h=(0,ci.D)({channel:t,isNew:!1}).shouldRenderTagsRow,g=i.useMemo((function(){return{width:u,height:d}}),[u,d]),m=l?hi().textContentUnread:hi().textContentRead;return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("div",{className:hi().contentPreview,style:g,children:[(0,r.jsxs)("div",{className:hi().content,children:[o&&null==n&&(0,r.jsx)(v.xv,{variant:"text-sm/normal",color:l?"header-secondary":"text-muted",children:He.Z.Messages.REPLY_QUOTE_MESSAGE_DELETED}),o&&null!=n&&(0,r.jsx)(zr.ZP,{message:n,content:f,className:m})]}),(0,r.jsx)("div",{className:a()(hi().textContentFooter,mi({},hi().noTags,!h)),children:h?(0,r.jsx)(ci.Z,{channel:t,tagsClassName:hi().tagPill,className:hi().row}):null})]})})}var Pi=n(769672),Ni=n(199150),Ai=n.n(Ni);function Ti(e){var t=e.channel,n=e.closePopout,i=(0,
ee.H)(t.id),o=i.sortOrder,a=i.layoutType,s=(0,ee.v)(),l=function(e){(0,ae.KR)({guildId:t.guild_id,channelId:t.id,sortOrder:e});s.getState().setSortOrder(t.id,e);n()},c=function(e){(0,ae.Do)({guildId:t.guild_id,channelId:t.id,forumLayout:e});s.getState().setLayoutType(t.id,e);n()};return(0,r.jsx)("div",{className:Ai().container,children:(0,r.jsxs)(Pi.ZP,{navId:"sort-and-view","aria-label":He.Z.Messages.FORUM_SORT_AND_VIEW_AY11_LABEL,hideScroller:!0,onClose:n,onSelect:n,children:[(0,r.jsxs)(Pi.kS,{label:He.Z.Messages.FORUM_CHANNEL_SORT_BY,children:[(0,r.jsx)(Pi.k5,{id:"sort-by-recent-activity",group:"sort-by",label:He.Z.Messages.FORUM_CHANNEL_SORT_BY_RECENTLY_ACTIVE,action:function(){return l(Ir.z.LATEST_ACTIVITY)},checked:o===Ir.z.LATEST_ACTIVITY}),(0,r.jsx)(Pi.k5,{id:"sort-by-date-posted",group:"sort-by",label:He.Z.Messages.FORUM_CHANNEL_SORT_BY_DATE_POSTED,action:function(){return l(Ir.z.CREATION_DATE)},checked:o===Ir.z.CREATION_DATE})]}),(0,r.jsxs)(Pi.kS,{
label:He.Z.Messages.FORUM_CHANNEL_VIEW_AS,children:[(0,r.jsx)(Pi.k5,{id:"view-as-list",group:"view-as",label:He.Z.Messages.FORUM_CHANNEL_VIEW_AS_LIST,action:function(){return c(h.X.LIST)},checked:a===h.X.LIST}),(0,r.jsx)(Pi.k5,{id:"view-as-grid",group:"view-as",label:He.Z.Messages.FORUM_CHANNEL_VIEW_AS_GRID,action:function(){return c(h.X.GRID)},checked:a===h.X.GRID})]}),(0,r.jsx)(Pi.kS,{children:(0,r.jsx)(Pi.sN,{id:"reset-all",label:(0,r.jsx)(v.xv,{variant:"text-sm/medium",color:"text-normal",children:He.Z.Messages.FORUM_CHANNEL_RESET_ALL}),action:function(){l(t.getDefaultSortOrder());c(t.getDefaultLayout())}})})]})})}n(196407);var Ri=n(678838),Ii=[];function Mi(){return Ii.join(" -> ")}var Zi=new Ri.Z("Flux"),Li=function(e){return e()},ki=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);this.changedStores=new Set;this.reactChangedStores=new Set;this.changeSentinel=0;this.isBatchEmitting=!1
;this.isDispatching=!1;this.isPaused=!1;this.pauseTimer=null}var t=e.prototype;t.destroy=function(){this.changedStores.clear();this.reactChangedStores.clear();Li=function(e){return e()}};t.injectBatchEmitChanges=function(e){Li=e};t.pause=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=this;this.isPaused=!0;null!==this.pauseTimer&&clearTimeout(this.pauseTimer);null!==e&&(this.pauseTimer=setTimeout((function(){t.pauseTimer=null;t.resume()}),e))};t.resume=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=this;clearTimeout(this.pauseTimer);this.pauseTimer=null;if(this.isPaused){this.isPaused=!1;e&&this.changedStores.size>0&&setImmediate((function(){return t.emit()}))}};t.batched=function(e){if(this.isPaused)e();else try{this.isPaused=!0;e()}finally{this.resume(!1);this.emit()}};t.emit=function(){var e=this;this.isBatchEmitting||this.isPaused||Li((function(){try{e.isBatchEmitting=!0;e.changeSentinel++
;for(var t=0;e.changedStores.size>0;){if(++t>100){Zi.error("LastFewActions",Mi());throw Error("change emit loop detected, aborting")}e.emitNonReactOnce()}for(;e.reactChangedStores.size>0;){if(++t>100){Zi.error("LastFewActions",Mi());throw Error("react change emit loop detected, aborting")}e.emitReactOnce()}}finally{e.isBatchEmitting=!1}}))};t.getChangeSentinel=function(){return this.changeSentinel};t.getIsPaused=function(){return this.isPaused};t.markChanged=function(e){e._changeCallbacks.hasAny()&&this.changedStores.add(e);e._reactChangeCallbacks.hasAny()&&this.reactChangedStores.add(e);this.isBatchEmitting||this.isDispatching||this.isPaused||this.emit()};t.emitNonReactOnce=function(){var e=this,t=Date.now(),n=this.changedStores;this.changedStores=new Set;n.forEach((function(t){0;t._changeCallbacks.invokeAll();e.changedStores.delete(t)}));var r=Date.now();r-t>100&&Zi.log("Slow batch emitChanges took ".concat(r-t,"ms recentActions:"),Mi())};t.emitReactOnce=function(){
var e=this,t=Date.now(),n=this.reactChangedStores;this.reactChangedStores=new Set;n.forEach((function(t){0;t._reactChangeCallbacks.invokeAll();e.reactChangedStores.delete(t)}));var r=Date.now();r-t>100&&Zi.log("Slow batch emitReactChanges took ".concat(r-t,"ms recentActions:"),Mi())};return e}();const Di=new ki;var Fi=function(){function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);this.handleStoreChange=function(){var e=Di.getChangeSentinel();if(r.storeVersionHandled!==e){r.changeCallback();r.storeVersionHandled=e}};this.stores=t;this.changeCallback=n}var t=e.prototype;t.attach=function(e){var t=this;this.stores.forEach((function(n,r){if(null==n)throw new Error("".concat(e," tried to load a non-existent store. Either it isn't defined or there is a circular dependency. Loaded ").concat(r," stores before error."));n.addReactChangeListener(t.handleStoreChange)}))};t.detach=function(){var e=this
;this.stores.forEach((function(t){return t.removeReactChangeListener(e.handleStoreChange)}))};return e}(),Hi=(n(559280),n(803996)),Ui=n.n(Hi);n(973935),n(364537),n(603609),n(25199);new Ri.Z("Flux");0;new Ri.Z("Flux");var Gi=n(298784),Vi=n.n(Gi),Bi=n(332675);var zi=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);this.listeners=new Set;this.add=function(e){t.listeners.add(e)};this.remove=function(e){t.listeners.delete(e)};this.addConditional=function(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!n||!1!==e()){var r=function(){!1===e()&&t.remove(r)};t.add(r)}}}var t=e.prototype;t.has=function(e){return this.listeners.has(e)};t.hasAny=function(){return this.listeners.size>0};t.invokeAll=function(){this.listeners.forEach((function(e){return e()}))};return e}();function Wi(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}
function Ki(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function qi(e){return function(e){if(Array.isArray(e))return Wi(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Wi(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Wi(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Xi,Yi=[],$i=!1,Qi=new Promise((function(e){Xi=function(){e();Xi=null}}));var Ji=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this;Ki(this,e);this._changeCallbacks=new zi
;this._reactChangeCallbacks=new zi;this._isInitialized=!1;this.addChangeListener=this._changeCallbacks.add;this.addConditionalChangeListener=this._changeCallbacks.addConditional;this.removeChangeListener=this._changeCallbacks.remove;this.addReactChangeListener=this._reactChangeCallbacks.add;this.removeReactChangeListener=this._reactChangeCallbacks.remove;this._dispatchToken=t.register(this.getName(),n,(function(e){if(r._changeCallbacks.hasAny()||r._reactChangeCallbacks.hasAny()){Di.markChanged(r);Di.getIsPaused()&&null!=r._mustEmitChanges&&r._mustEmitChanges(e)&&Di.resume(!1)}else 0}));this._dispatcher=t;Yi.push(this);0;$i&&this.initializeIfNeeded()}var t=e.prototype;t.getName=function(){var e;return null!==(e=this.constructor.displayName)&&void 0!==e?e:this.constructor.name};t.initializeIfNeeded=function(){if(!this._isInitialized){this.initialize();this._isInitialized=!0}};t.initialize=function(){};t.syncWith=function(e,t,n){var r=this;this.waitFor.apply(this,qi(e))
;var i=0,o=function(){if(i!==Di.getChangeSentinel()){i=Di.getChangeSentinel();!1!==t()&&r.emitChange()}};o=function(e,t){var n=null;return 0===e?function(){clearImmediate(n);n=setImmediate(t)}:function(){null==n&&(n=setTimeout((function(){try{t()}finally{n=null}}),e))}}(null!=n?n:0,o);e.forEach((function(e){return e.addChangeListener(o)}))};t.waitFor=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=this,i=t.map((function(e,t){Ui()(null!=e,"Store.waitFor(...) called with null Store at index ".concat(t," for store ").concat(r.getName()));Ui()(e._dispatcher===r._dispatcher,"Stores belong to two separate dispatchers.");return e.getDispatchToken()}));this._dispatcher.addDependencies(this.getDispatchToken(),i)};t.emitChange=function(){Di.markChanged(this)};t.getDispatchToken=function(){return this._dispatchToken};t.mustEmitChanges=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){return!0};this._mustEmitChanges=e}
;e.initialize=function(){$i=!0;Yi.forEach((function(e){return e.initializeIfNeeded()}));null!=Xi&&Xi()};e.destroy=function(){Yi.length=0;Di.destroy()};e.getAll=function(){return Yi};return e}();Ji.initialized=Qi;function eo(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function to(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function no(e){no=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return no(e)}function ro(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});t&&ao(e,t)}function io(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++){n=o[r];t.indexOf(n)>=0||(i[n]=e[n])}return i}(e,t);if(Object.getOwnPropertySymbols){
var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++){n=o[r];t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}}return i}function oo(e,t){return!t||"object"!==lo(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ao(e,t){ao=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return ao(e,t)}function so(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done);a=!0){o.push(r.value);if(t&&o.length===t)break}}catch(e){s=!0;i=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return eo(e,t);var n=Object.prototype.toString.call(e).slice(8,-1)
;"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return eo(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var lo=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function co(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var n,r=no(e);if(t){var i=no(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return oo(this,n)}}var uo={_state:void 0,_version:void 0},fo=function(e){ro(n,e);var t=co(n);function n(e,r){to(this,n);var i
;(i=t.call(this,e,r))._version=null==i.getClass().migrations?0:i.getClass().migrations.length;i.callback=function(e){var t=i.getClass().persistKey;i.persist();n._writePromises.delete(t);n._writeResolvers.delete(t);e()};i.throttledCallback=Vi().throttle((function(e){return i.callback(e)}),i.getClass().throttleDelay,{leading:!1});if("string"!=typeof i.getClass().persistKey)throw new Error("".concat(i.getClass().name," initialized without a `persistKey`. Add one so we know where to save your stuff!"));if("function"!=typeof i.initialize)throw new Error("".concat(i.getClass().name," initialized without an `initialize` method. Add one that accepts the initial cached state."));if("function"!=typeof i.getState)throw new Error("".concat(i.getClass().name," initialized without a `getState` method. Add one that returns the full state of the store for persistance to work."));i.addChangeListener((function(){return i.asyncPersist()}));return i}var r=n.prototype;r.getClass=function(){
return this.constructor};r.initializeFromState=function(e){this.initialize(e);if(this._isInitialized)this.emitChange();else{n.allPersistKeys.add(this.getClass().persistKey);this._isInitialized=!0}};r.initializeIfNeeded=function(){if(!this._isInitialized){n.allPersistKeys.add(this.getClass().persistKey);var e=n.migrateAndReadStoreState(this.getClass().persistKey,this.getClass().migrations),t=e.state,r=e.requiresPersist;this.initialize(t);r&&this.asyncPersist();this._isInitialized=!0}};r.asyncPersist=function(){var e=this,t=this.getClass(),r=t.persistKey,i=t.disableWrite,o=t.throttleDelay;if(n.disableWrites||i)return Promise.resolve(!1);var a=n._writePromises.get(r);if(null!=a)return a;a=new Promise((function(t){var i=o>0?function(){return e.throttledCallback(t)}:function(){return e.callback(t)};n._writeResolvers.set(r,[t,requestIdleCallback(i,{timeout:500})])}));n._writePromises.set(r,a);return a};r.persist=function(){var e=this.getClass().persistKey,t=this.getState(),n=this._version
;Bi.Z.set(e,{_state:t,_version:n})};r.clear=function(){var e=this.getClass().persistKey;Bi.Z.remove(e)};n.clearAll=function(e){null==n._clearAllPromise&&(n._clearAllPromise=new Promise((function(t){requestIdleCallback((function(){n.clearPersistQueue(e);n.allPersistKeys.forEach((function(t){n.shouldClear(e,t)&&Bi.Z.remove(t)}));Ji.getAll().forEach((function(t){if(t instanceof n&&n.shouldClear(e,t.getClass().persistKey)){t._isInitialized=!1;t.initializeIfNeeded()}}));n._clearAllPromise=null;t()}),{timeout:500})})));return n._clearAllPromise};n.shouldClear=function(e,t){var r;return!(null===(r=e.omit)||void 0===r?void 0:r.includes(t))&&("all"===e.type||"user-data-only"===e.type&&!n.userAgnosticPersistKeys.has(t))};n.clearPersistQueue=function(e){n._writeResolvers.forEach((function(t,r){var i=so(t,2),o=i[0],a=i[1];if(n.shouldClear(e,r)){n._writePromises.delete(r);n._writeResolvers.delete(r);cancelIdleCallback(a);o(!1)}}));n._writePromises.clear();n._writeResolvers.clear()}
;n.getAllStates=function(){return Promise.all(Array.from(n._writePromises.values())).then((function(){var e={};n.allPersistKeys.forEach((function(t){var n;e[t]=(null!==(n=Bi.Z.get(t))&&void 0!==n?n:uo)._state}));return e}))};n.initializeAll=function(e){Ji.getAll().forEach((function(t){if(t instanceof n){var r=t.getClass().persistKey;if(!e.hasOwnProperty(r))return;t.initializeFromState(e[r])}}))};n.destroy=function(){Ji.destroy();n.clearPersistQueue({type:"all"});n.allPersistKeys.clear();n.userAgnosticPersistKeys.clear()};n.migrateAndReadStoreState=function(e,t){var r=null!=n._clearAllPromise?null:Bi.Z.get(e),i=null!=r?r:uo,o=i._state,a=i._version,s=io(i,["_state","_version"]),l=null==t?0:t.length;if(0!==l&&a!==l&&null!=t){var c=null!=a?a:0,u=o;null==a&&(u=s);for(;c<l;){u=(0,t[c])(u);c++}return{state:u,requiresPersist:!0}}return Object.values(s).length>0?{state:s,requiresPersist:!0}:{state:o,requiresPersist:!1}};return n}(Ji);fo.allPersistKeys=new Set;fo.userAgnosticPersistKeys=new Set
;fo._writePromises=new Map;fo._writeResolvers=new Map;fo.disableWrites=!1;fo.disableWrite=!1;fo.throttleDelay=0;n(930979);function ho(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function go(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done);a=!0){o.push(r.value);if(t&&o.length===t)break}}catch(e){s=!0;i=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ho(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ho(e,t)}(e,t)||function(){
throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function mo(e,t){return null!=t&&e.length===t.length&&!e.some((function(e,n){return t[n]!==e}))}function po(e,t){return e===t}function vo(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:po,o=null!=n?n:[t],a=(0,i.useRef)(t),s=(0,i.useRef)(),l=(0,i.useRef)(),c=l.current;mo(o,s.current)||(c=t());(0,i.useLayoutEffect)((function(){a.current=t;s.current=o}),o);(0,i.useLayoutEffect)((function(){l.current=c}),[c]);var u=go((0,i.useState)(null),2),d=u[1];(0,i.useLayoutEffect)((function(){var t=function(){var e=a.current();if(!r(l.current,e)){l.current=e;d({})}};t();var n=new Fi(e,t);n.attach("useStateFromStores");return function(){return n.detach()}}),[]);return c}var yo=n(851994);function bo(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}
function Oo(e,t){t=null!=t?t:{};Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})));n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}));return e}function So(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++){n=o[r];t.indexOf(n)>=0||(i[n]=e[n])}return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++){n=o[r];t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}}return i}function Co(){return Promise.resolve()}function jo(e){var t=e.channel,n=e.closePopout,o=e.setPopoutRef,a=(0,ee.H)(t.id).tagFilter,s=(0,ee.v)(),l=vo([ge.Z],(function(){
return ge.Z.keyboardModeEnabled})),c=i.useCallback((function(e){(0,ae.e7)({guildId:t.guild_id,channelId:t.id,tagId:e,filterTagIds:Array.from(a),added:!a.has(e),location:{page:Fe.ZY5.GUILD_CHANNEL,section:Fe.jXE.FORUM_CHANNEL_HEADER,object:Fe.qAy.CHANNEL_TAG}});s.getState().toggleTagFilter(t.id,e);l||n()}),[t,a,s,l,n]),f=i.useCallback((function(){s.getState().setTagFilter(t.id,new Set);l||n()}),[s,t.id,l,n]),h=(0,u.ZP)({id:"".concat(t.id,"-all-tags-dropdown-navigator"),isEnabled:!0,wrap:!0,scrollToStart:Co,scrollToEnd:Co}),g=i.useRef(null);i.useEffect((function(){requestAnimationFrame((function(){if(null!=g.current){var e=g.current.querySelector(".".concat(Pn().tag));null!=e&&e.focus()}}))}),[]);return(0,r.jsxs)(yo.Z,{ref:o,"aria-label":He.Z.Messages.FORUM_TAG_FILTER_HEADER,className:Pn().container,children:[(0,r.jsx)("div",{className:Pn().header,children:(0,r.jsxs)("div",{className:Pn().headerLeft,children:[(0,r.jsx)(v.X6,{color:"interactive-normal",variant:"text-xs/bold",
className:Pn().headerText,children:He.Z.Messages.FORUM_TAG_POST_SELECT}),(0,r.jsx)("div",{className:Pn().countContainer,children:(0,r.jsx)(v.xv,{className:Pn().countText,color:"none",variant:"text-xs/medium",children:a.size})})]})}),(0,r.jsx)(d.bG,{navigator:h,children:(0,r.jsx)(d.SJ,{children:function(e){var n=e.ref,i=So(e,["ref"]);return(0,r.jsx)("div",Oo(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))));r.forEach((function(t){bo(e,t,n[t])}))}return e}({ref:function(e){n.current=e;g.current=e}},i),{className:Pn().tagContainer,children:t.availableTags.map((function(e){return(0,r.jsx)($n.Z,{className:Pn().tag,tag:e,selected:a.has(e.id),onClick:function(){return c(e.id)}},e.id)}))}))}})}),(0,r.jsx)("div",{className:Pn().separator}),(0,r.jsx)(U.Co,{
look:U.Co.Looks.LINK,size:U.Co.Sizes.MIN,color:U.Co.Colors.CUSTOM,className:Pn().clear,"aria-label":He.Z.Messages.FORUM_CLEAR_ALL,onClick:f,children:(0,r.jsx)(v.xv,{variant:"text-sm/medium",color:"text-link",children:He.Z.Messages.FORUM_CLEAR_ALL})})]})}var xo=n(504003),Eo=n(707839),wo=n.n(Eo),_o=n(840008),Po=n.n(_o);function No(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ao(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}function To(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))));r.forEach((function(t){Ao(e,t,n[t])}))}return e}function Ro(e,t){t=null!=t?t:{}
;Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})));n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}));return e}function Io(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++){n=o[r];t.indexOf(n)>=0||(i[n]=e[n])}return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++){n=o[r];t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}}return i}function Mo(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){
var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done);a=!0){o.push(r.value);if(t&&o.length===t)break}}catch(e){s=!0;i=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return No(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return No(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Zo=.5;function Lo(e){var t=e.channel,n=e.guild;return(0,r.jsx)(Xe.oL,{createStore:function(){return(0,Xe.NU)(t)},children:(0,r.jsx)(Vo,{channel:t,guild:n})},t.id)}var ko=new ii({minWidth:320,maxWidth:450,gap:16}),Do=function(e,t,n){return 0===e?0:si(n)};function Fo(e){var t=e.itemRole,n=e.coords
;return(0,r.jsx)("div",{className:a()(Dt().card,Dt().archivedDividerRow,Dt().columnsSpan),style:n,"data-item-role":t,children:(0,r.jsx)("div",{className:Dt().emptyMainCard,children:(0,r.jsx)(v.X6,{variant:"eyebrow",className:Dt().archivedDivider,children:He.Z.Messages.FORUM_SECTION_ARCHIVED})})},"section-divider")}function Ho(e){var t=e.section,n=e.coords,i=e.key,o=e.isShowingSearchResult,a=e.hasActiveThreads;return function(){return 2===t&&!o&&a?(0,r.jsx)(Fo,{coords:null==n?void 0:Ro(To({},n),{position:"absolute"}),itemRole:"section"},i):null}}function Uo(e,t){return"card-".concat(e,"-").concat(t)}function Go(e){if("string"==typeof e){var t=e.match(/card-{\d+}-({\d+})$/);return null==t?null:t[1]}return null}function Vo(e){var t=e.channel,n=(0,Xe.xH)((function(e){return{editorHeight:e.editorHeight,editorAdditionRowHeight:e.editorAdditionRowHeight,listViewCardHeights:e.listViewCardHeights,formOpen:e.formOpen,cardHeightVersion:e.cardHeightVersion}
}),c.Z),o=n.editorHeight,s=n.editorAdditionRowHeight,l=n.listViewCardHeights,f=n.formOpen,g=function(e){var t=(0,ee.H)(e.id),n=t.sortOrder,r=t.tagFilter,i=t.layoutType,o=(0,te.vP)({channel:e,sortOrder:n,tagFilter:r,shouldAutomaticallyAck:!0}),a=(0,m.e7)([T.Z],(function(){return!T.Z.hasLoaded(e.guild_id)})),s=(0,te.M1)(e).gridViewUpsellLoading,l=(0,R.qQ)(e,n,r),c=l.threadIds,u=l.canLoadMore,d=l.loadMore,f=l.loading,h=(0,te.XZ)({channelId:e.id}),g=h.searchResults,p=h.isSearchLoading,v=a||f||s||p;(0,te.ES)(e,n,r);return{activeThreadIds:o,archivedThreadIds:c,searchResults:g,canLoadMore:u,loadMore:d,loading:v,archivedThreadsLoading:f,activeThreadsLoading:a,gridViewUpsellLoading:s,isSearchLoading:p,layoutType:i}}(t),p=g.activeThreadIds,y=g.archivedThreadIds,O=g.searchResults,C=g.canLoadMore,j=g.loadMore,E=g.activeThreadsLoading,w=g.archivedThreadsLoading,_=g.loading,I=g.isSearchLoading,Z=g.layoutType,D=p.length>0,F=D||y.length>0,H=(0,P.Z)(t),U=(0,ee.H)(t.id).tagFilter;(0,te.ku)(t,U,f)
;var G=(0,te.jR)(t),V=(0,te.eZ)(t),B=i.useRef(null),z=function(e){var t=e.guildId,n=e.channelId,r=e.scrollerRef;ie.useForumChannelSeenManager({guildId:t,channelId:n});var o=i.useRef(null),a=i.useCallback((function(e,t){var n=!0,r=!1,i=void 0;try{for(var o,a=t[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value,l=s.target.dataset.itemId;if(null==l)return;var c=Date.now();s.intersectionRatio>=Zo?(0,re.rj)(e,l,c):(0,re.Ct)(e,l,c)}}catch(e){r=!0;i=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}}),[]);i.useEffect((function(){var e,t=null===(e=r.current)||void 0===e?void 0:e.getScrollerNode();if(null!=t){o.current=new IntersectionObserver((function(e){return a(n,e)}),{root:t,rootMargin:"0px 100000px 0px 100000px",threshold:Zo});return function(){var e;null===(e=o.current)||void 0===e||e.disconnect();o.current=null}}}),[n,a,r]);var s=i.useCallback((function(e,t){var r;null!=e?null===(r=o.current)||void 0===r||r.observe(e):(0,re.Ct)(n,t,Date.now())}),[n]);return{
observePostVisibilityAnalytics:s}}({scrollerRef:B,channelId:t.id,guildId:t.guild_id}).observePostVisibilityAnalytics,W=Z===h.X.GRID,K=null!=O,Y=i.useRef(null),Q=dr(),J=Q.containerRef,ne=Q.containerWidth,se=i.useMemo((function(){return W?ko.getRenderOptions(ne):oi}),[W,ne]).columns,le=i.useMemo((function(){return _?Math.round((window.innerHeight-200)/118):0}),[_]),ce=i.useMemo((function(){var e=window.innerHeight,t=Math.ceil(e/si(ko.getWidth(ne)))*se;return E?t:0}),[ne,se,E]),ue=i.useMemo((function(){var e=window.innerHeight,t=Math.ceil(e/si(ko.getWidth(ne)))*se;return w?t:0}),[ne,se,w]),de=i.useMemo((function(){var e=window.innerHeight,t=Math.ceil(e/si(ko.getWidth(ne)))*se;return I&&K?t:0}),[ne,se,I,K]),fe=i.useMemo((function(){return W?!G&&K?[1,0]:V?K?[1,O.length+de,0]:[1,p.length+ce,y.length+ue]:[1,p.length+ce,0]:!G&&K?[1,1]:V?K?[1,O.length,0,le]:[1,p.length,y.length,le]:[1,p.length,1]}),[W,K,p.length,y.length,G,V,le,O,ce,ue,de]),he=i.useMemo((function(){
return!G&&K?[[],[]]:V?K?[[],O,[],[]]:[[],p,y,[]]:[[],p,[]]}),[K,G,V,O,p,y]),me=i.useCallback((function(e,n){(0,ae.B5)({guildId:t.guild_id,channelId:t.id,postId:e.id,isSearchResult:oe.Z.getHasSearchResults(),location:{page:Fe.ZY5.GUILD_CHANNEL,section:Fe.jXE.FORUM_CHANNEL_POST}});if(n)(0,A.ad)(e,xo.on.BROWSER);else{Y.current=e.id;(0,M.ok)(e)}}),[t.guild_id,t.id,Y]),pe=i.useCallback((function(e,n,i){return 0===e?(0,r.jsx)(qo,{channel:t,isEmpty:!D,isSearchLoading:I,numResults:null==O?void 0:O.length,coords:n,children:!_&&(0,r.jsx)(vt,{channel:t,hasAnyThread:F},t.id)}):2!==e||V?1===e&&K&&!G?(0,r.jsx)(zo,{channel:t,coords:n}):i():(0,r.jsx)(Bo,{channel:t,coords:n})}),[K,V,O,G,t,D,I,_,F]),ve=(0,m.e7)([$.Z],(function(){return $.Z.hasHidden(t.id)}));i.useEffect((function(){var e,t=W?Ee:B,n=null===(e=t.current)||void 0===e?void 0:e.getScrollerState();if(null!=n&&!ve&&n.scrollTop>o){var r;null===(r=t.current)||void 0===r||r.scrollTo({to:0})}}),[ve]);var ye=function(e){
var t=e.listRef,n=e.hasActiveThreads,o=e.threadIdsBySection,s=e.listViewCardHeights,l=e.editorHeight,c=e.editorAdditionRowHeight,u=e.renderSectionOrItem,d=e.gotoThread,f=e.observePostVisibilityAnalytics,h=e.isShowingSearchResult,g=i.useCallback((function(e){return function(n){t.current=n;var r;e.current=null!==(r=null==n?void 0:n.getScrollerNode())&&void 0!==r?r:null}}),[t]),m=i.useCallback((function(e){return Ho({section:e.section,isShowingSearchResult:h,hasActiveThreads:n})()}),[n,h]),p=i.useCallback((function(e){return u(e.section,void 0,(function(){if(3===e.section)return __OVERLAY__?null:(0,r.jsx)("div",{"data-item-role":"item",className:a()(Dt().loadingCard,Dt()["loadingCard-".concat(e.row%3)])},"loading-".concat(e.row));var t=o[e.section][e.row];return(0,r.jsx)("li",{className:Dt().card,"data-item-role":"item",children:(0,r.jsx)(v.y5,{children:(0,r.jsx)(Zt.ZP,{className:Dt().mainCard,threadId:t,gotoThread:d,observePostVisibilityAnalytics:f})})
},"".concat(e.section,"-").concat(t))}))}),[u,o,d,f]),y=i.useCallback((function(e,t){if(0===e)return l+c;var n=o[e][t],r=s[n];return null==r?104:r+8}),[o,s,l,c]);return{updateListScrollerRef:g,renderListSection:m,renderListItem:p,getListSectionHeight:i.useCallback((function(e){return 2===e&&n?40:0}),[n]),getListItemHeight:y}}({listRef:B,hasActiveThreads:D,threadIdsBySection:he,listViewCardHeights:l,editorHeight:o,editorAdditionRowHeight:s,renderSectionOrItem:pe,gotoThread:me,observePostVisibilityAnalytics:z,isShowingSearchResult:K}),be=ye.updateListScrollerRef,Oe=ye.renderListSection,Se=ye.renderListItem,Ce=ye.getListSectionHeight,je=ye.getListItemHeight,xe=function(e){var t=e.listRef,n=e.padding,r=e.channel,o=(0,m.e7)([ge.Z],(function(){return ge.Z.keyboardModeEnabled})),a=i.useCallback((function(e){var r=t.current,i=document.querySelector(e);null!=i&&(null==r||r.scrollIntoViewNode({node:i,padding:n,callback:function(){var t;null===(t=document.querySelector(e))||void 0===t||t.focus({
preventScroll:!0})}}))}),[n]),s=i.useCallback((function(){return new Promise((function(e){var n=t.current;null==n||n.scrollToTop({callback:function(){return requestAnimationFrame(e)}})}))}),[]),l=i.useCallback((function(){return new Promise((function(e){var n=t.current;null==n||n.scrollToBottom({callback:function(){return requestAnimationFrame(e)}})}))}),[]);return(0,u.ZP)({id:"forum-channel-list-".concat(r.id),isEnabled:o,scrollToStart:s,scrollToEnd:l,setFocus:a})}({listRef:B,padding:96,channel:t}),Ee=i.useRef(null),we=function(e){var t=e.masonryListScrollerRef,n=e.threadIdsBySection,o=e.gotoThread,s=e.renderSectionOrItem,l=e.hasActiveThreads,c=e.editorHeight,u=e.editorAdditionRowHeight,d=e.isShowingSearchResult,f=e.canSearchForumPosts,h=e.canViewArchivedPosts,g=e.observePostVisibilityAnalytics,m=e.focusedThreadId,p=i.useRef(null),v=i.useCallback((function(e){t.current=e;p.current=null==e?void 0:e.getScrollerNode()}),[t]),y=i.useCallback((function(){var e=t.current
;return null!=e?e.getItemGrid():[]}),[t]),b=i.useCallback((function(){var e=t.current;return null!=e?e.getCoordsMap():{}}),[t]),O=i.useCallback((function(e){var n=t.current;if(null!=n){var r=n.getCoordsMap()[e];if(null!=r){n.scrollIntoViewRect({start:r.top-10,end:r.top+r.height+10});m.current=Go(e)}}}),[t,m]),S=i.useCallback((function(e){var t=Go(e);if(null!=t){var n=k.Z.getChannel(t);null!=n&&o(n,!0)}}),[o]),C=i.useCallback((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(0==n[e].length)return"section-".concat(e,"-").concat(t);var r=n[e][t];return Uo(e,null==r?t:r)}),[n]),j=i.useCallback((function(e,t,n){return s(e,t,Ho({section:e,coords:t,key:n,isShowingSearchResult:d,hasActiveThreads:l}))}),[s,l,d]),x=i.useCallback((function(e,t,i,s){if(0===e)return null;var l=n[e][t];return null==l?__OVERLAY__?null:(0,r.jsx)("div",{style:To({},i),"data-item-role":"item",className:a()(Dt().loadingCard,Dt()["loadingCard-".concat(t%3)])},s):(0,r.jsx)(Oi,{
className:a()(Dt().card,Dt().mainCard),threadId:l,gotoThread:o,observePostVisibilityAnalytics:g,coords:i},s)}),[n,o,g]),E=i.useCallback((function(e){return 0===e?c+u-24:2===e?l||!h?40:0:1===e&&d&&!f?40:0}),[c,u,d,f,l,h]);return{updateMasonryListScrollerRef:v,masonryListContainerRef:p,focusedThreadId:m,getItemGrid:y,getCoordsMap:b,handleGridFocus:O,handleGridSelect:S,getItemKey:C,renderGridSection:j,renderGridItem:x,getGridSectionHeight:E}}({masonryListScrollerRef:Ee,threadIdsBySection:he,editorHeight:o,editorAdditionRowHeight:s,gotoThread:me,renderSectionOrItem:pe,hasActiveThreads:D,isShowingSearchResult:K,canSearchForumPosts:G,canViewArchivedPosts:V,observePostVisibilityAnalytics:z,focusedThreadId:Y}),_e=we.updateMasonryListScrollerRef,Pe=we.getItemGrid,Ne=we.getCoordsMap,Ae=we.handleGridFocus,Te=we.getItemKey,Re=we.renderGridSection,Ie=we.renderGridItem,Me=we.getGridSectionHeight;!function(e){
var t=e.masonryListScrollerRef,n=e.containerWidth,r=e.isGridLayout,o=e.threadIdsBySection,a=e.focusedThreadId,s=e.parentId;i.useEffect((function(){if(r){var e=setTimeout((function(){if(null!=t.current&&null!=a.current){var e=a.current;if("string"==typeof e)if(null!=L.ZP.getSidebarState(s)){var n=o.findIndex((function(t){return t.find((function(t){return t===e}))})),r=t.current.getCoordsMap(),i=r["__section__".concat(n)],l=r[Uo(n,e)];null!=i&&null!=l&&t.current.scrollIntoViewRect({start:i.top+l.top-100,end:i.top+l.top+l.height+50})}else a.current=null}}),500);return function(){return clearTimeout(e)}}}),[s,n,r,o,a,t])}({masonryListScrollerRef:Ee,containerWidth:ne,isGridLayout:W,threadIdsBySection:he,parentId:t.id,focusedThreadId:Y});var Ze=i.useCallback((function(){var e,n;if(!K){var r=W?null===(e=Ee.current)||void 0===e?void 0:e.getScrollerState():null===(n=B.current)||void 0===n?void 0:n.getScrollerState();if(null!=r){(0,ae.ab)({guildId:t.guild_id,channelId:t.id})
;var i=r.scrollTop+r.offsetHeight;r.scrollHeight-i<(W?Math.max(200,si(ne)):200)&&j()}}}),[K,W,t.guild_id,t.id,ne,j]);return(0,r.jsxs)("div",{className:Dt().container,ref:J,children:[(0,r.jsx)(Wo,{channel:t}),(0,r.jsx)(S.Z,{children:(0,r.jsx)(v.H,{children:He.Z.Messages.THREADS})}),H?(0,r.jsx)("div",{className:Dt().optInNotice,children:(0,r.jsx)(N.Z,{channel:t})}):null,W?(0,r.jsx)(b.Z,{getItemGrid:Pe,getCoordsMap:Ne,onFocus:Ae,children:(0,r.jsx)(X.ZP,{ref:_e,itemGutter:16,padding:24,className:Dt().grid,columns:se,sections:fe,getItemKey:Te,getSectionHeight:Me,getItemHeight:Do,renderSection:Re,renderItem:Ie,onScroll:C?Ze:void 0,chunkSize:1e3},Z)},Z):(0,r.jsx)(d.bG,{navigator:xe,children:(0,r.jsx)(x.Wd,{children:function(e){return(0,r.jsx)(d.SJ,{children:function(t){var n=t.ref,i=Io(t,["ref"]);return(0,r.jsx)(q._2,Ro(To({ref:be(n),className:Dt().list,sections:fe,sectionHeight:Ce,rowHeight:je,renderRow:Se,renderSection:Oe,chunkSize:15,onScroll:C?Ze:void 0,paddingBottom:24},i,e),{
innerRole:"list"}),Z)}})}})})]})}function Bo(e){var t=e.channel,n=e.coords,i=(0,C.Z)(t);return(0,r.jsx)("div",{className:a()(Dt().missingReadHistoryPermission,Dt().columnsSpan),style:n,children:(0,r.jsx)(v.xv,{color:"text-muted",variant:"text-md/normal",children:He.Z.Messages.FORUM_CHANNEL_NO_POST_HISTORY.format({channelName:i})})})}function zo(e){var t=e.channel,n=e.coords,i=(0,C.Z)(t);return(0,r.jsx)("div",{className:a()(Dt().missingReadHistoryPermission,Dt().columnsSpan),style:n,children:(0,r.jsx)(v.xv,{color:"text-muted",variant:"text-md/normal",children:He.Z.Messages.FORUM_CHANNEL_NO_SEARCH_POST_HISTORY.format({channelName:i})})})}function Wo(e){var t=e.channel,n=i.useCallback((function(){Q.Z.resort(t.id)}),[t]),o=(0,m.e7)([J.Z],(function(){return J.Z.getNewThreadCount()}));return 0===o?null:(0,r.jsx)(G.Z,{className:Dt().newPostsButton,onClick:n,children:(0,r.jsx)(v.xv,{color:"text-brand",variant:"text-md/medium",children:He.Z.Messages.NEW_FORUM_POST_COUNT.format({count:o})})})}
function Ko(){return Promise.resolve()}function qo(e){var t,n,o,s=e.channel,h=e.isEmpty,g=e.isSearchLoading,y=e.numResults,b=e.children,O=e.coords,S=(0,Xe.xH)((function(e){return{name:e.name,formOpen:e.formOpen,titleFocused:e.titleFocused,hasClickedForm:e.hasClickedForm,textAreaState:e.textAreaState,onboardingExpanded:e.onboardingExpanded,setEditorAdditionRowHeight:e.setEditorAdditionRowHeight}}),c.Z),C=S.name,x=S.formOpen,_=S.titleFocused,P=S.hasClickedForm,N=S.textAreaState,A=S.onboardingExpanded,T=S.setEditorAdditionRowHeight,R=(0,ee.H)(s.id).tagFilter,M=(0,Xe.AF)(),Z=(0,ee.v)(),L=(0,te.r_)(s),k=(0,I.cD)(s),W=Mo(i.useState(k),2),q=W[0],X=W[1],$=Mo((0,E.A)(null!==(o=s.getGuildId())&&void 0!==o?o:void 0),2)[1],J=k||q&&$;i.useEffect((function(){k&&X(!0)}),[k]);var ne=i.useRef(null),re=i.useCallback((function(){l()((function(){null!=ne.current&&M.getState().setEditorHeight(ne.current.offsetHeight)}))}),[M]);i.useLayoutEffect(re,[re,h,J,A]);(0,Y.yp)({event:Fe.CkL.REMEASURE_TARGET,
handler:re});var ie=(0,m.e7)([F.Z],(function(){return F.Z.getUploads(s.id,D.d.FirstThreadMessage)})),oe=(0,te.ql)(s),se=i.useRef(null),le=i.useRef(null),ce=Mo(i.useState(0),2),ue=ce[0],de=ce[1],fe=(0,m.e7)([H.Z],(function(){return H.Z.windowSize()})).width,he=null===(n=null===(t=se.current)||void 0===t?void 0:t.getBoundingClientRect())||void 0===n?void 0:n.width,ge=i.useRef(null);i.useLayoutEffect((function(){var e,t=le.current,n=null==t||null===(e=t.children)||void 0===e?void 0:e[0];if(null!=se.current&&null!=n&&null!=n.children){var r=se.current.getBoundingClientRect(),i=r.left,o=r.top,a=0,s=!0,l=!1,c=void 0;try{for(var u,d=n.children[Symbol.iterator]();!(s=(u=d.next()).done);s=!0){var f=u.value.getBoundingClientRect(),h=f.right;if(f.top-o>f.height)break;h-i>a&&(a=h-i)}}catch(e){l=!0;c=e}finally{try{s||null==d.return||d.return()}finally{if(l)throw c}}de(a)}}),[s.availableTags,fe,he,R])
;var me=C.length>0&&!x&&(g||null!=y),pe=!__OVERLAY__&&!P&&!x&&_&&(0===N.textValue.trim().length||N.textValue.trim()===oe)&&0===ie.length;i.useLayoutEffect((function(){var e=me||pe;if(!e)return T(0);null!=ge.current&&T(e?ge.current.clientHeight:0)}),[T,me,pe,ge]);var ve=(0,u.ZP)({id:"".concat(s.id,"-tags-navigator"),isEnabled:!0,wrap:!0,scrollToStart:Ko,scrollToEnd:Ko,orientation:f.hy.HORIZONTAL});return(0,r.jsx)("div",{className:a()(Dt().card,Dt().headerRow,Dt().columnsSpan),ref:ne,style:Ro(To({},O),{position:"static",height:"auto"}),children:(0,r.jsxs)(Y.I3,{children:[(0,r.jsx)("div",{className:a()(Dt().mainCard,Dt().header,Ao({},Dt().headerWithMatchingPosts,me||pe)),children:(0,r.jsx)(jr,{parentChannel:s,onChange:re,isSearchLoading:g,canCreatePost:J})}),(me||pe)&&(0,r.jsxs)("div",{className:Dt().matchingPostsRow,ref:ge,children:[me&&(0,r.jsxs)("div",{className:Dt().matchingPosts,children:[(0,r.jsx)(v.X6,{variant:"text-xs/normal",color:"text-normal",
children:g?He.Z.Messages.FORUM_SEARCHING:0===y?He.Z.Messages.FORUM_SEARCH_NO_MATCHING_POSTS:He.Z.Messages.FORUM_SEARCH_MATCHING_POSTS_ALT.format({numPosts:y,query:C})}),!g&&(0,r.jsx)(G.Z,{onClick:function(){(0,ae.zI)({guildId:s.guild_id,channelId:s.id});Q.Z.clearForumSearch(s.id);M.getState().setName("")},children:(0,r.jsx)(v.xv,{variant:"text-xs/semibold",color:"text-brand",className:Dt().clear,children:He.Z.Messages.CLEAR})})]}),(0,r.jsx)("div",{className:Dt().tagsSpacer}),pe?J?(0,r.jsxs)("div",{className:Dt().startPostHelp,children:[(0,r.jsx)(w.Z,{shortcut:"SHIFT",className:Dt().keyboardShortcut}),(0,r.jsx)(v.xv,{variant:"text-xs/normal",color:"text-normal",children:"+"}),(0,r.jsx)(w.Z,{shortcut:"ENTER",className:Dt().keyboardShortcut}),(0,r.jsx)(v.xv,{variant:"text-xs/normal",color:"text-normal",children:He.Z.Messages.FORUM_ENTER_TO_START_POST})]}):(0,r.jsxs)("div",{className:Dt().startPostHelp,children:[(0,r.jsx)(K.Z,{height:14,width:14,className:Dt().warnIcon}),(0,r.jsx)(v.xv,{
variant:"text-xs/normal",color:"text-normal",children:He.Z.Messages.FORUM_NO_POST_PERMISSION_HELP})]}):null]}),(0,r.jsx)(Rt,{channel:s,onChange:re}),(0,r.jsxs)("div",{className:Dt().tagsContainer,ref:se,children:[(0,r.jsx)(Xo,{channel:s}),s.availableTags.length>0?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:Dt().divider}),(0,r.jsx)("div",{className:Dt().tagList,ref:le,children:(0,r.jsx)(d.bG,{navigator:ve,children:(0,r.jsx)(d.SJ,{children:function(e){var t=e.ref,n=Io(e,["ref"]);return(0,r.jsx)("div",Ro(To({className:Dt().tagListInner,ref:t},n),{children:s.availableTags.map((function(e){return(0,r.jsx)($n.Z,{className:Dt().tag,tag:e,onClick:function(){return function(e){(0,ae.e7)({guildId:s.guild_id,channelId:s.id,tagId:e,filterTagIds:Array.from(R),added:!R.has(e),location:{page:Fe.ZY5.GUILD_CHANNEL,section:Fe.jXE.FORUM_CHANNEL_HEADER,object:Fe.qAy.CHANNEL_TAG}});Z.getState().toggleTagFilter(s.id,e)}(e.id)},selected:R.has(e.id)},e.id)}))}))}})})}),(0,r.jsx)(V.ZP,{
renderPopout:function(e){var t=e.closePopout,n=e.setPopoutRef;return(0,r.jsx)(jo,{channel:s,closePopout:t,setPopoutRef:n})},position:V.ZP.Positions.BOTTOM,align:V.ZP.Align.RIGHT,children:function(e,t){var n=t.isShown;return(0,r.jsxs)(U.Co,Ro(To({},e),{size:U.Co.Sizes.MIN,color:U.Co.Colors.CUSTOM,className:a()(Dt().tagsButton,Ao({},Dt().tagsButtonWithCount,R.size>0)),style:{left:ue},innerClassName:Dt().tagsButtonInner,"aria-label":He.Z.Messages.FORUM_TAG_SEE_MORE,children:[R.size>0?(0,r.jsx)("div",{className:Dt().countContainer,children:(0,r.jsx)(v.xv,{className:Dt().countText,color:"none",variant:"text-xs/medium",children:R.size})}):He.Z.Messages.FORUM_TAG_ALL,n?(0,r.jsx)(z.Z,{width:16}):(0,r.jsx)(B.Z,{width:16})]}))}}),(0,r.jsxs)(U.Co,{size:U.Co.Sizes.MIN,color:U.Co.Colors.CUSTOM,className:a()(Dt().tagsButton,Dt().tagsButtonPlaceholder),innerClassName:Dt().tagsButtonInner,"aria-label":He.Z.Messages.FORUM_TAG_SEE_MORE,children:[R.size>0?(0,r.jsx)("div",{className:Dt().countContainer,
children:(0,r.jsx)(v.xv,{className:Dt().countText,color:"none",variant:"text-xs/medium",children:R.size})}):null,(0,r.jsx)(z.Z,{width:24})]})]}):null]}),b,L&&(0,r.jsx)(j.Z,{contentTypes:[p.z$.FORUM_CHANNEL_HELPER_CARD],children:function(e){var t=e.visibleContent,n=e.markAsDismissed;return t===p.z$.FORUM_CHANNEL_HELPER_CARD?(0,r.jsx)(zt,{onDismiss:n}):null}})]})},"create-form")}function Xo(e){var t=e.channel,n=(0,ee.v)(),o=(0,O.ZP)(),a=i.useMemo((function(){return o===Fe.BRd.LIGHT?Po():wo()}),[o]),s=i.useRef(!0),l=(0,te.M1)(t),c=l.showGridViewUpsell,u=l.gridViewUpsellLoading,d=l.shouldAutoEnableGridView,f=i.useCallback((function(e){(0,ae.X0)({channelId:t.id,guildId:t.guild_id,gridViewAutoEnabled:e})}),[t.guild_id,t.id]);i.useLayoutEffect((function(){if(c&&!u){if(s.current&&d){n.getState().setLayoutType(t.id,h.X.GRID);y.ZP.saveChannel(t.id,{defaultForumLayout:h.X.GRID});_.Z.increment({name:g.V.FORUM_CHANNEL_GRID_AUTO_ENABLED},!0)}s.current=!1}}),[t.guild_id,t.id,u,d,c,n])
;var m=i.useCallback((function(){return(0,r.jsx)(V.ZP,{renderPopout:function(e){var n=e.closePopout;return(0,r.jsx)(Ti,{channel:t,closePopout:n})},position:V.ZP.Positions.BOTTOM,align:V.ZP.Align.LEFT,children:function(e){return(0,r.jsxs)(U.Co,Ro(To({},e),{size:U.Co.Sizes.MIN,color:U.Co.Colors.CUSTOM,className:Dt().sortDropdownEmptyTags,innerClassName:Dt().sortDropdownEmptyTagsInner,"aria-label":He.Z.Messages.FORUM_CHANNEL_SORT_AND_VIEW,children:[(0,r.jsx)(W.Z,{}),(0,r.jsx)(v.xv,{className:Dt().sortDropdownEmptyTagsText,variant:"text-sm/medium",color:"interactive-normal",children:He.Z.Messages.FORUM_CHANNEL_SORT_AND_VIEW})]}))}})}),[t]);return(0,r.jsx)(j.Z,{contentTypes:[p.z$.FORUM_CHANNEL_GRID_VIEW_UPSELL],children:function(e){var i=e.visibleContent,o=e.markAsDismissed;return i===p.z$.FORUM_CHANNEL_GRID_VIEW_UPSELL?d?(0,r.jsx)(V.ZP,{renderPopout:function(){return(0,r.jsx)(Z.ZP,{className:Dt().gridUpsellContainer,header:He.Z.Messages.FORUM_CHANNEL_GRID_UPSELL_AUTO_TITLE,asset:(0,
r.jsx)("img",{className:Dt().gridUpsellAsset,src:a,alt:""}),content:He.Z.Messages.FORUM_CHANNEL_GRID_UPSELL_AUTO_DESCRIPTION,buttonCTA:He.Z.Messages.FORUM_CHANNEL_GRID_UPSELL_AUTO_CONFIRM,secondaryButtonCTA:He.Z.Messages.FORUM_CHANNEL_GRID_UPSELL_AUTO_CANCEL,onSecondaryClick:function(){y.ZP.open(t.id)},onClick:Fe.dG4,markAsDismissed:o,onComponentMount:function(){return f(!0)}})},position:V.ZP.Positions.BOTTOM,align:V.ZP.Align.CENTER,animation:V.ZP.Animation.TRANSLATE,shouldShow:!0,children:function(){return m()}}):(0,r.jsx)(V.ZP,{renderPopout:function(){return(0,r.jsx)(Z.ZP,{className:Dt().gridUpsellContainer,header:He.Z.Messages.FORUM_CHANNEL_GRID_UPSELL_MANUAL_TITLE,asset:(0,r.jsx)("img",{className:Dt().gridUpsellAsset,src:a,alt:""}),content:He.Z.Messages.FORUM_CHANNEL_GRID_UPSELL_MANUAL_DESCRIPTION,buttonCTA:He.Z.Messages.FORUM_CHANNEL_GRID_UPSELL_MANUAL_CONFIRM,secondaryButtonCTA:He.Z.Messages.FORUM_CHANNEL_GRID_UPSELL_MANUAL_CANCEL,onSecondaryClick:o,onClick:function(){
n.getState().setLayoutType(t.id,h.X.GRID)},markAsDismissed:o,onComponentMount:function(){return f(!1)}})},position:V.ZP.Positions.BOTTOM,align:V.ZP.Align.CENTER,animation:V.ZP.Animation.TRANSLATE,shouldShow:!0,children:function(){return m()}}):(0,r.jsx)(r.Fragment,{children:m()})}})}},535093:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var r=n(785893),i=(n(667294),n(240243));function o(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}function a(e,t){t=null!=t?t:{};Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})));n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}));return e}function s(e,t){if(null==e)return{}
;var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++){n=o[r];t.indexOf(n)>=0||(i[n]=e[n])}return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++){n=o[r];t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}}return i}function l(e){var t=e.width,n=void 0===t?29:t,l=e.height,c=void 0===l?22:l,u=e.color,d=void 0===u?"currentColor":u,f=e.backgroundColor,h=s(e,["width","height","color","backgroundColor"]);return(0,r.jsx)("svg",a(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))));r.forEach((function(t){o(e,t,n[t])}))}return e}({},(0,i.Z)(h)),{width:n,height:c,viewBox:"0 0 29 22",children:(0,r.jsxs)("g",{fill:"none",fillRule:"evenodd",children:[(0,
r.jsx)("rect",{width:n,height:c,fill:f,fillOpacity:".8",rx:"3"}),(0,r.jsx)("polygon",{fill:d,points:"13.292 6.111 15.708 6.111 15.708 15.889 13.292 15.889"}),(0,r.jsx)("path",{fill:d,d:"M9.66666667,6.11111111 L4.83333333,6.11111111 C3.96333333,6.11111111 3.625,6.51851852 3.625,7.33333333 L3.625,14.6666667 C3.625,15.4814815 3.96333333,15.8888889 4.83333333,15.8888889 L9.66666667,15.8888889 C10.5366667,15.8888889 10.875,15.4814815 10.875,14.6666667 L10.875,9.77777778 L7.25,9.77777778 L7.25,12.2222222 L8.45833333,12.2222222 L8.45833333,13.4444444 L6.04166667,13.4444444 L6.04166667,8.55555556 L10.875,8.55555556 L10.875,7.33333333 C10.875,6.51851852 10.5366667,6.11111111 9.66666667,6.11111111 Z"}),(0,r.jsx)("polygon",{fill:d,points:"25.375 8.556 25.375 6.111 18.125 6.111 18.125 15.889 20.542 15.889 20.542 12.222 24.167 12.222 24.167 9.778 20.542 9.778 20.542 8.556"})]})}))}},979915:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var r=n(785893),i=(n(667294),n(240243));function o(e,t,n){
t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}function a(e,t){t=null!=t?t:{};Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})));n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}));return e}function s(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++){n=o[r];t.indexOf(n)>=0||(i[n]=e[n])}return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++){n=o[r];t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}}return i}function l(e){
var t=e.width,n=void 0===t?24:t,l=e.height,c=void 0===l?24:l,u=e.color,d=void 0===u?"currentColor":u,f=s(e,["width","height","color"]);return(0,r.jsx)("svg",a(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))));r.forEach((function(t){o(e,t,n[t])}))}return e}({},(0,i.Z)(f)),{width:n,height:c,viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,r.jsx)("path",{d:"M12 2C6.486 2 2 6.487 2 12C2 17.515 6.486 22 12 22C17.514 22 22 17.515 22 12C22 6.487 17.514 2 12 2ZM12 6.751C12.69 6.751 13.25 7.311 13.25 8.001C13.25 8.692 12.69 9.251 12 9.251C11.31 9.251 10.75 8.691 10.75 8C10.75 7.31 11.31 6.751 12 6.751ZM15 17H9V15H11V12H10V10H12C12.553 10 13 10.448 13 11V15H15V17Z",fill:d})}))}},804116:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l})
;var r=n(785893),i=(n(667294),n(240243));function o(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}function a(e,t){t=null!=t?t:{};Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})));n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}));return e}function s(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++){n=o[r];t.indexOf(n)>=0||(i[n]=e[n])}return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++){n=o[r];t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}}return i}
function l(e){var t=e.width,n=void 0===t?16:t,l=e.height,c=void 0===l?16:l,u=e.color,d=void 0===u?"currentColor":u,f=e.foreground,h=s(e,["width","height","color","foreground"]);return(0,r.jsxs)("svg",a(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))));r.forEach((function(t){o(e,t,n[t])}))}return e}({},(0,i.Z)(h)),{width:n,height:c,viewBox:"0 0 16 16",fill:"none",children:[(0,r.jsx)("path",{className:f,fill:d,d:"M12.1803 4.66659L12.1803 14.6666H10.4701L10.4701 4.66659L8.53289 6.63325L7.33329 5.40825L11.3292 1.33325L15.3333 5.40825L14.1337 6.65825L12.1803 4.66659Z"}),(0,r.jsx)("path",{className:f,fill:d,
d:"M3.81962 11.3333L3.81962 1.33325L5.52983 1.33325L5.52985 11.3333L7.46703 9.36658L8.66663 10.5916L4.67068 14.6666L0.666626 10.5916L1.86622 9.34158L3.81962 11.3333Z"})]}))}}}]);
//# sourceMappingURL=1ba2dc0b675468dc9f7e.js.map