"use strict";(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([[31879],{831879:(e,n,r)=>{r.r(n);r.d(n,{Steps:()=>ge,default:()=>be});var t=r(785893),o=r(667294),i=r(824390),s=r.n(i),l=r(441143),a=r.n(l),u=r(791462),c=r(489992),d=r(361417),f=r(40188),p=r(129230),m=r(653772),S=r(784238),I=r(814071),C=r(191940),_=r(629590),E=r(969225),y=r(124722),v=r(31165),h=r(67416),g=r(932847),O=r(75141),b=r(294184),R=r.n(b),N=r(589175),U=r(402411),P=r(72791),M=r(240243);function L(e,n,r){n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r;return e}function x(e,n){n=null!=n?n:{};Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):function(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})));r.push.apply(r,t)}return r}(Object(n)).forEach((function(r){
Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}));return e}function j(e,n){if(null==e)return{};var r,t,o=function(e,n){if(null==e)return{};var r,t,o={},i=Object.keys(e);for(t=0;t<i.length;t++){r=i[t];n.indexOf(r)>=0||(o[r]=e[r])}return o}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(t=0;t<i.length;t++){r=i[t];n.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}}return o}function T(e){var n=e.width,r=void 0===n?24:n,o=e.height,i=void 0===o?24:o,s=e.color,l=void 0===s?"currentColor":s,a=j(e,["width","height","color"]);return(0,t.jsxs)("svg",x(function(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{},t=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))));t.forEach((function(n){L(e,n,r[n])}))}return e}({},(0,M.Z)(a)),{width:r,height:i,
viewBox:"0 0 16 16",children:[(0,t.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.45329 8.53891L3.26217 13.7844C2.95995 14.0719 2.49772 14.0719 2.21328 13.7844C1.92883 13.497 1.92883 13.0299 2.21328 12.7245L6.88884 7.99999L2.21328 3.27543C1.92883 2.988 1.92883 2.50297 2.21328 2.21555C2.49772 1.92812 2.95995 1.92812 3.26217 2.21555L8.45329 7.47903C8.73774 7.76645 8.73774 8.23352 8.45329 8.53891Z",fill:l}),(0,t.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14.4533 8.53891L9.26217 13.7844C8.95995 14.0719 8.49772 14.0719 8.21328 13.7844C7.92883 13.497 7.92883 13.0299 8.21328 12.7245L12.8888 7.99999L8.21328 3.27543C7.92883 2.988 7.92883 2.50297 8.21328 2.21555C8.49772 1.92812 8.95995 1.92812 9.26217 2.21555L14.4533 7.47903C14.7377 7.76645 14.7377 8.23352 14.4533 8.53891Z",fill:l})]}))}var D=r(459289),A=r.n(D);function Z(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function B(e){
B=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return B(e)}function G(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}});n&&F(e,n)}function w(e,n){return!n||"object"!==H(n)&&"function"!=typeof n?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):n}function F(e,n){F=Object.setPrototypeOf||function(e,n){e.__proto__=n;return e};return F(e,n)}var H=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function k(e){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}()
;return function(){var r,t=B(e);if(n){var o=B(this).constructor;r=Reflect.construct(t,arguments,o)}else r=t.apply(this,arguments);return w(this,r)}}var Y=function(e){G(r,e);var n=k(r);function r(){Z(this,r);return n.apply(this,arguments)}r.prototype.render=function(){var e=this.props.tier;return(0,t.jsxs)("div",{className:A().tierPill,children:[(0,t.jsx)(U.Z,{className:A().tierPillStar,children:(0,t.jsx)(P.Z,{tier:e,className:A().tierPillGem})}),(0,O.nW)(e)]})};return r}(o.PureComponent),W=function(e){var n=e.subscriptionChange,r=e.guild;if(0===n)return null;var o=Math.max(r.premiumSubscriberCount+n,0),i=(0,O.rF)(o,r.id),s=i-(0,O.rF)(r.premiumSubscriberCount,r.id);return 0===s?null:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(T,{className:s>0?A().levelUpIcon:A().levelDownIcon}),(0,t.jsx)(Y,{tier:i})]})},V=function(e){G(r,e);var n=k(r);function r(){Z(this,r);return n.apply(this,arguments)}r.prototype.render=function(){var e=this.props,n=e.guild,r=e.className,o=e.subscriptionChange
;return(0,t.jsxs)("div",{className:R()(A().subscription,r),children:[(0,t.jsx)(E.Z,{guild:n,size:E.Z.Sizes.LARGE}),(0,t.jsxs)("div",{className:A().subscriptionInfo,children:[(0,t.jsx)("div",{className:A().guildName,children:n.name}),(0,t.jsxs)("div",{className:A().tierInfo,children:[(0,t.jsx)(Y,{tier:n.premiumTier}),(0,t.jsx)(W,{guild:n,subscriptionChange:null!=o?o:0})]})]})]})};return r}(o.PureComponent),q=r(720897),K=r(487502),z=r(326440),X=r(136733),Q=r(81951),J=r(959797),$=r(865029),ee=r.n($);function ne(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function re(e){re=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return re(e)}function te(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}});n&&ie(e,n)}function oe(e,n){
return!n||"object"!==se(n)&&"function"!=typeof n?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):n}function ie(e,n){ie=Object.setPrototypeOf||function(e,n){e.__proto__=n;return e};return ie(e,n)}var se=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function le(e){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var r,t=re(e);if(n){var o=re(this).constructor;r=Reflect.construct(t,arguments,o)}else r=t.apply(this,arguments);return oe(this,r)}}var ae=function(e){te(r,e);var n=le(r);function r(){ne(this,r);return n.apply(this,arguments)}r.prototype.render=function(){var e=this.props.onClose;return(0,t.jsxs)(h.xB,{separator:!1,
justify:K.Z.Justify.BETWEEN,children:[(0,t.jsx)(c.X6,{variant:"heading-md/semibold",children:this.props.text}),null!=e?(0,t.jsx)(h.ol,{onClick:e}):null]})};return r}(o.PureComponent);function ue(e){var n=e.imageClass,r=e.children,o=e.error,i=e.onDismissError;return(0,t.jsxs)("div",{className:ee().content,children:[(0,t.jsx)("div",{className:R()(ee().image,n)}),r,(0,t.jsx)(N.Z,{children:null!=o?(0,t.jsx)(X.Z,{className:ee().error,children:(0,t.jsx)(z.Z,{onDismiss:i,children:o.message})}):null})]})}var ce=function(e){var n=e.canceledCount,r=(0,u.e7)([q.Z],(function(){return q.Z.getPremiumTypeSubscription()}));return null==r?null:(0,t.jsxs)("div",{className:ee().pendingCancellation,children:[(0,t.jsx)(Q.Z,{className:ee().pendingCancellationIcon}),(0,t.jsx)(c.xv,{variant:"text-md/normal",className:ee().pendingCancellationMessage,children:J.Z.Messages.PREMIUM_GUILD_SUBSCRIBE_CONFIRM_CANCEL_WARNING.format({date:r.currentPeriodEnd,canceledCount:n})})]})};function de(e){
var n=e.imageClass,r=e.blurb,o=e.guild,i=e.warning,s=e.error,l=e.onDismissError,a=e.slotCount,u=void 0===a?1:a,d=e.canceledCount,f=void 0===d?0:d;return(0,t.jsxs)(ue,{imageClass:n,error:s,onDismissError:l,children:[(0,t.jsx)(c.xv,{variant:"text-md/normal",children:r}),(0,t.jsx)(V,{className:ee().guildCard,guild:o,subscriptionChange:u}),(0,t.jsx)(c.xv,{variant:"text-md/normal",children:i}),f>0?(0,t.jsx)(ce,{canceledCount:f}):null]})}var fe=function(e){te(r,e);var n=le(r);function r(){ne(this,r);return n.apply(this,arguments)}r.prototype.render=function(){var e=this.props,n=e.confirmation,r=e.confirmationLabel,o=e.isModifyingSubscription,i=e.onConfirm,s=e.onCancel;return(0,t.jsxs)(h.mz,{children:[(0,t.jsx)(C.Co,{onClick:i,submitting:o,"aria-label":r,children:n}),(0,t.jsx)(C.Co,{look:C.Co.Looks.LINK,color:C.Co.Colors.PRIMARY,onClick:s,disabled:o,children:J.Z.Messages.CANCEL})]})};return r}(o.PureComponent),pe=function(e){te(r,e);var n=le(r);function r(){ne(this,r)
;return n.apply(this,arguments)}r.prototype.render=function(){var e=this.props,n=e.guild,r=e.header,i=e.blurb,s=e.warning,l=e.confirmation,a=e.confirmationLabel,u=e.imageClass,c=e.error,d=e.isModifyingSubscription,f=e.onConfirm,p=e.onCancel,m=e.onDismissError,S=e.canceledCount;return(0,t.jsxs)(o.Fragment,{children:[(0,t.jsx)(ae,{text:r}),(0,t.jsx)(h.hz,{children:(0,t.jsx)(de,{guild:n,blurb:i,warning:s,imageClass:u,error:c,onDismissError:m,canceledCount:S})}),(0,t.jsx)(fe,{confirmation:l,confirmationLabel:a,isModifyingSubscription:d,onConfirm:f,onCancel:p})]})};return r}(o.PureComponent);pe.Header=ae;pe.ApplyBody=de;pe.TransferBody=function(e){var n,r,i=e.imageClass,s=e.blurb,l=e.fromGuilds,a=e.toGuild,u=e.error,d=e.onDismissError,f=e.slotCount,p=void 0===f?1:f,m=e.canceledCount,S=void 0===m?0:m,I=o.useRef(l),C=null===(n=I.current)||void 0===n?void 0:n.length,_=null===(r=I.current)||void 0===r?void 0:r.reduce((function(e,n){e.hasOwnProperty(n.id)||(e[n.id]=[]);e[n.id].push(n);return e
}),{});return(0,t.jsxs)(ue,{imageClass:i,error:u,onDismissError:d,children:[(0,t.jsx)(c.xv,{variant:"text-md/normal",children:s}),(0,t.jsx)(c.xv,{variant:"text-xs/bold",className:ee().transferGuildCardHeader,children:J.Z.Messages.PREMIUM_GUILD_SUBSCRIBE_CONFIRM_TRANSFER_FROM_GUILD.format({guildCount:C})}),null!=_?Object.keys(_).map((function(e){return(0,t.jsx)(V,{className:ee().transferFromGuildCard,guild:_[e][0],subscriptionChange:-1*_[e].length},e)})):null,(0,t.jsx)(c.xv,{variant:"text-xs/normal",className:ee().transferGuildCardHeader,children:J.Z.Messages.PREMIUM_GUILD_SUBSCRIBE_CONFIRM_TRANSFER_TO_GUILD.format({slotCount:p})}),(0,t.jsx)("div",{className:ee().activeTransferGuildCardBorder,children:(0,t.jsx)(V,{className:ee().transferToGuildCard,guild:a,subscriptionChange:null!=l?l.length:1})}),S>0?(0,t.jsx)(ce,{canceledCount:S}):null]})};pe.Footer=fe;const me=pe;var Se=r(570515),Ie=r(461061),Ce=r(21501),_e=r.n(Ce);function Ee(e,n){(null==n||n>e.length)&&(n=e.length)
;for(var r=0,t=new Array(n);r<n;r++)t[r]=e[r];return t}function ye(e,n,r,t,o,i,s){try{var l=e[i](s),a=l.value}catch(e){r(e);return}l.done?n(a):Promise.resolve(a).then(t,o)}function ve(e,n,r){n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r;return e}function he(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var t,o,i=[],s=!0,l=!1;try{for(r=r.call(e);!(s=(t=r.next()).done);s=!0){i.push(t.value);if(n&&i.length===n)break}}catch(e){l=!0;o=e}finally{try{s||null==r.return||r.return()}finally{if(l)throw o}}return i}}(e,n)||function(e,n){if(!e)return;if("string"==typeof e)return Ee(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ee(e,n)
}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var ge,Oe=function(e,n){var r,t,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function l(i){return function(l){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,t&&(o=2&i[0]?t.return:i[0]?t.throw||((o=t.return)&&o.call(t),0):t.next)&&!(o=o.call(t,i[1])).done)return o;(t=0,o)&&(i=[2&i[0],o.value]);switch(i[0]){case 0:case 1:o=i;break;case 4:s.label++;return{value:i[1],done:!1};case 5:s.label++;t=i[1];i=[0];continue;case 7:i=s.ops.pop();s.trys.pop();continue;default:if(!(o=s.trys,o=o.length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}
if(6===i[0]&&s.label<o[1]){s.label=o[1];o=i;break}if(o&&s.label<o[2]){s.label=o[2];s.ops.push(i);break}o[2]&&s.ops.pop();s.trys.pop();continue}i=n.call(e,s)}catch(e){i=[6,e];t=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}};!function(e){e.UNUSED_QUANTITY_SELECT="UNUSED_QUANTITY_SELECT";e.GUILD_SELECT="GUILD_SELECT";e.CONFIRM="CONFIRM";e.SUCCESS="SUCCESS"}(ge||(ge={}));const be=function(e){var n,r,i=e.guildBoostSlots,l=e.selectedGuild,b=e.locationSection,R=e.transitionState,N=e.onClose,U=(0,O.vx)(I.Z.boostSlots);a()(null!=i||null!=l,"Must either provide slots or an initial selected guild");a()(!(null==i?void 0:i.some((function(e){return e.isOnCooldown()}))),"If slots are provided, they must not be on cooldown");var P,M=[null==i?ge.UNUSED_QUANTITY_SELECT:null,null==l?ge.GUILD_SELECT:null,ge.CONFIRM,ge.SUCCESS].filter((function(e){return null!=e})),L=(0,u.e7)([S.Z],(function(){return S.Z.getFlattenedGuilds()})),x=he((0,u.Wu)([p.Z],(function(){
return[p.Z.isModifyingAppliedBoost,p.Z.applyBoostError]})),2),j=x[0],T=x[1],D=he(o.useState(""),2),A=D[0],Z=D[1],B=he(o.useState(M[0]),2),G=B[0],w=B[1],F=he(o.useState(!1),2),H=F[0],k=F[1],Y=he(o.useState(l),2),W=Y[0],V=Y[1],q=he(o.useState(null!=i?i:U.slice(0,1)),2),K=q[0],z=q[1],X=o.useMemo((function(){return null==K?[]:K.map((function(e){var n=e.premiumGuildSubscription;return m.Z.getGuild(null==n?void 0:n.guildId)})).filter((function(e){return null!=e}))}),[K]),Q=o.useMemo((function(){var e;return null!=(null==K||null===(e=K[0])||void 0===e?void 0:e.premiumGuildSubscription)}),[K]),$=function(){N(G===ge.SUCCESS);g.default.track(Ie.rMx.MODAL_DISMISSED,{type:Ie.jXE.PREMIUM_GUILD_SUBSCRIBE_MODAL,location_section:b})},ee=(ve(P={},ge.UNUSED_QUANTITY_SELECT,{body:function(){a()(!(null==i&&0===U.length),"Cannot provide no slots if there are no other available slots");return(0,t.jsxs)("div",{className:_e().quantitySelectorBody,children:[(0,t.jsx)(c.X6,{variant:"heading-md/semibold",
className:_e().quantitySelectorHeader,children:J.Z.Messages.PREMIUM_GUILD_SUBSCRIBE_UNUSED_SLOTS_HEADER}),(0,t.jsx)(c.xv,{variant:"text-md/normal",className:_e().quantitySelectorDescription,children:J.Z.Messages.PREMIUM_GUILD_SUBSCRIBE_UNUSED_SLOTS_DESCRIPTION}),(0,t.jsxs)("div",{className:_e().quantitySelectorWrapper,children:[(0,t.jsx)(y.Z,{value:K.length,onChange:function(e){return z(U.slice(0,e))},minValue:1,maxValue:U.length}),(0,t.jsx)(c.xv,{className:_e().quantitySelectorLabel,variant:"text-md/normal",children:J.Z.Messages.PREMIUM_GUILD_SUBSCRIBE_UNUSED_SLOTS_COUNTER})]})]})},footer:function(){return(0,t.jsxs)(h.mz,{children:[(0,t.jsx)(C.Co,{onClick:function(){return w(ge.CONFIRM)},children:J.Z.Messages.PREMIUM_GUILD_SUBSCRIBE_UNUSED_SLOTS_NEXT}),(0,t.jsx)(C.Co,{look:C.Co.Looks.LINK,color:C.Co.Colors.PRIMARY,onClick:$,children:J.Z.Messages.PREMIUM_GUILD_SUBSCRIBE_UNUSED_SLOTS_CANCEL})]})}}),ve(P,ge.GUILD_SELECT,{header:function(){return(0,t.jsxs)(h.xB,{
className:_e().selectHeaderContainer,children:[(0,t.jsx)(c.X6,{className:_e().selectHeader,variant:"heading-md/semibold",children:Q?J.Z.Messages.PREMIUM_GUILD_SUBSCRIBE_SELECT_GUILD_TRANSFER_HEADER:J.Z.Messages.PREMIUM_GUILD_SUBSCRIBE_SELECT_GUILD_HEADER}),(0,t.jsx)(v.Z,{size:v.Z.Sizes.MEDIUM,placeholder:J.Z.Messages.PREMIUM_GUILD_SUBSCRIBE_SEARCH_GUILD_PLACEHOLDER,"aria-label":J.Z.Messages.PREMIUM_GUILD_SUBSCRIBE_SEARCH_GUILD_PLACEHOLDER,className:_e().selectSearch,query:A,onChange:Z,onClear:function(){return Z("")}})]})},bodyClass:_e().selectContent,body:function(){return L.filter((function(e){return!X.some((function(n){return n.id===e.id}))&&(A.length<=0||s()(A.toLowerCase(),e.name.toLowerCase()))})).map((function(e){return(0,t.jsxs)(_.Z,{className:_e().selectGuild,onClick:function(){V(e);w(ge.CONFIRM)},children:[(0,t.jsx)(E.Z,{guild:e,size:E.Z.Sizes.SMALL}),(0,t.jsx)(c.xv,{className:_e().selectGuildName,variant:"text-md/normal",children:e.name})]},e.id)}))}}),ve(P,ge.CONFIRM,{
body:function(){if(null==W)return null;var e=K.filter((function(e){return e.canceled})).length,n=K.length,r=X.length;return Q?(0,t.jsx)(me.TransferBody,{fromGuilds:X,toGuild:W,blurb:J.Z.Messages.PREMIUM_GUILD_SUBSCRIBE_CONFIRM_TRANSFER_BLURB.format({slotCount:n,guildCount:r}),imageClass:_e().transferConfirmImage,error:H?T:null,onDismissError:function(){return k(!1)},slotCount:n,canceledCount:e}):(0,t.jsx)(me.ApplyBody,{guild:W,blurb:J.Z.Messages.PREMIUM_GUILD_SUBSCRIBE_CONFIRM_BLURB,warning:J.Z.Messages.PREMIUM_GUILD_SUBSCRIBE_CONFIRM_COOLDOWN_WARNING.format({days:Ie.o3l,slotCount:n}),imageClass:_e().confirmImage,error:H?T:null,onDismissError:function(){return k(!1)},slotCount:n,canceledCount:e})},footer:function(){var e,n,r=K.length,o=M[0]===ge.CONFIRM?$:function(){return w(M[M.indexOf(G)-1])},i=(n=(e=function(){return Oe(this,(function(e){switch(e.label){case 0:if(null==W||0===(null==K?void 0:K.length))return[2];a()(!K.some((function(e){return e.isOnCooldown()
})),"Cannot use a premium guild subscription slot while on cooldown");e.label=1;case 1:e.trys.push([1,4,,5]);return[4,Promise.all(K.map((function(e){var n=e.premiumGuildSubscription;return null!=n?(0,d.dG)(n.guildId,n.id):Promise.resolve()})))];case 2:e.sent();return[4,(0,d.W3)(W.id,K.map((function(e){return e.id})))];case 3:e.sent();w(ge.SUCCESS);return[3,5];case 4:e.sent();k(!0);return[3,5];case 5:return[2]}}))},function(){var n=this,r=arguments;return new Promise((function(t,o){var i=e.apply(n,r);function s(e){ye(i,t,o,s,l,"next",e)}function l(e){ye(i,t,o,s,l,"throw",e)}s(void 0)}))}),function(){return n.apply(this,arguments)});return(0,t.jsx)(me.Footer,{confirmation:Q?J.Z.Messages.PREMIUM_GUILD_SUBSCRIBE_TRANSFER_CONFIRM_CONFIRMATION.format({slotCount:r}):J.Z.Messages.PREMIUM_GUILD_SUBSCRIBE_CONFIRM_CONFIRMATION.format({slotCount:r}),confirmationLabel:Q?J.Z.Messages.PREMIUM_GUILD_SUBSCRIBE_TRANSFER_CONFIRM_CONFIRMATION_LABEL.format({slotCount:r
}):J.Z.Messages.PREMIUM_GUILD_SUBSCRIBE_CONFIRM_CONFIRMATION_LABEL.format({slotCount:r}),onConfirm:i,onCancel:o,isModifyingSubscription:j})}}),ve(P,ge.SUCCESS,{body:function(){return(0,t.jsx)(Se.R7,{guild:W,isTransfer:Q,guildBoostQuantity:K.length,onClose:$})}}),P);o.useEffect((function(){g.default.track(Ie.rMx.OPEN_MODAL,{type:Ie.jXE.PREMIUM_GUILD_SUBSCRIBE_MODAL,location_section:b})}),[b]);var ne=ee[G];return(0,t.jsxs)(h.Y0,{transitionState:R,className:_e().modal,size:h.Cg.SMALL,children:[null===(n=ne.header)||void 0===n?void 0:n.call(ne),(0,t.jsx)(h.hz,{className:ne.bodyClass,children:(0,t.jsx)(f.Z,{step:G,steps:M,children:ne.body()})}),null===(r=ne.footer)||void 0===r?void 0:r.call(ne),(0,t.jsx)(h.ol,{className:_e().modalCloseButton,onClick:$})]})}},570515:(e,n,r)=>{r.d(n,{R7:()=>de,CP:()=>ae,Gq:()=>ce})
;var t=r(785893),o=r(667294),i=r(294184),s=r.n(i),l=r(441143),a=r.n(l),u=r(43833),c=r(791462),d=r(556137),f=r(559019),p=r(909187),m=r(655868),S=r(832010),I=r(212658),C=r(871295),_=r(554962),E=r(511515),y=r(939042),v=r(350138),h=r(796805),g=r(470352),O=r(112508),b=r(732031),R=r(48400),N=r.n(R);function U(e){var n=e.text,r=e.color;return(0,t.jsxs)("div",{className:N().upsellFooter,children:[(0,t.jsx)(b.Z,{className:N().upsellFooterIcon,color:r}),(0,t.jsx)("div",{children:n})]})}var P=r(817513),M=r(653772),L=r(893321),x=r(859023),j=r(378564),T=r(707955),D=r(916957),A=r(191940),Z=r(420202),B=r(124722),G=r(384469),w=r(82961),F=r(757987),H=r(956299),k=r(562181),Y=r(106027),W=r(81951),V=r(95467),q=r(590483),K=r(56435),z=r(461061),X=r(298716),Q=r(609993),J=r(959797),$=r(338250),ee=r.n($);function ne(e,n){(null==n||n>e.length)&&(n=e.length);for(var r=0,t=new Array(n);r<n;r++)t[r]=e[r];return t}function re(e,n,r){n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0
}):e[n]=r;return e}function te(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{},t=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))));t.forEach((function(n){re(e,n,r[n])}))}return e}function oe(e,n){n=null!=n?n:{};Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):function(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})));r.push.apply(r,t)}return r}(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}));return e}function ie(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){
var t,o,i=[],s=!0,l=!1;try{for(r=r.call(e);!(s=(t=r.next()).done);s=!0){i.push(t.value);if(n&&i.length===n)break}}catch(e){l=!0;o=e}finally{try{s||null==r.return||r.return()}finally{if(l)throw o}}return i}}(e,n)||function(e,n){if(!e)return;if("string"==typeof e)return ne(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ne(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function se(e){var n=e.amount,r=e.currency,t=e.intervalType,o=e.intervalCount,i=void 0===o?1:o,s=(0,K.T4)(n,r);return t===X.rV.YEAR?J.Z.Messages.BILLING_PRICE_PER_YEAR_EACH.format({price:s}):t===X.rV.MONTH&&1===i?J.Z.Messages.BILLING_PRICE_PER_MONTH_EACH.format({price:s
}):t===X.rV.MONTH&&i>1?J.Z.Messages.BILLING_PRICE_PER_MULTI_MONTH_EACH.format({price:s}):null}function le(e){var n=e.intervalType,r=e.intervalCount,t=void 0===r?1:r;return n===X.rV.YEAR?J.Z.Messages.PREMIUM_GUILD_PLAN_SINGLE_YEAR:n===X.rV.MONTH&&1===t?J.Z.Messages.PREMIUM_GUILD_PLAN_SINGLE_MONTH:null}function ae(e){var n=e.guildId,r=e.premiumSubscriptionPlan,o=e.numGuildBoosts,i=e.setNumGuildBoosts,l=e.premiumSubscription,u=e.onClickPremiumSubscriptionLink,d=e.existingAvailableSlots,p=void 0===d?[]:d,m=e.priceOptions,I=r.interval,C=r.intervalCount,y=(0,c.e7)([D.Z],(function(){return D.Z.getForSkuAndInterval(X.Si.GUILD,I,C)})),h=(0,c.e7)([x.default],(function(){return x.default.getCurrentUser()})),g=(0,c.e7)([M.Z],(function(){return M.Z.getGuild(n)}),[n]);a()(null!=y,"Missing guildBoostingSubscriptionPlan");a()(null!=g,"Unknown guild: ".concat(n));var O=(0,
E.N)(),b=q.ZP.hasBoostDiscount(h)&&null!=y.premiumUserPrice,R=q.ZP.getPrice(y.id,b,!1,m),N=o*R.amount,L=q.ZP.hasBoostDiscount(h)&&null!=l?J.Z.Messages.GUILD_SUBSCRIPTION_PURCHASE_MODAL_FOOTER_DISCOUNT.format({planName:q.ZP.getDisplayPremiumType(l.planId)}):(null!=O?J.Z.Messages.GUILD_SUBSCRIPTION_PURCHASE_MODAL_FOOTER_UPSELL_TRIAL_VARIANT:J.Z.Messages.GUILD_SUBSCRIPTION_PURCHASE_MODAL_FOOTER_UPSELL).format({onPremiumSubscriptionClick:u,discountPercentage:(0,K.T3)(P.default.locale,X.Rr/100),freeSubscriptionCount:X.cb}),j=p.filter((function(e){return e.canceled})).length,T=(0,q.Ap)(m.paymentSourceId),A="HR"==(0,_.Z)().ipCountryCode&&R.currency==Q.pK.EUR;return(0,t.jsxs)("div",{className:ee().planSelectStep,children:[(0,t.jsx)("div",{className:s()(ee().planSelectText,ee().bodyText),children:J.Z.Messages.GUILD_SUBSCRIPTION_PURCHASE_MODAL_STEP_SELECT_DESCRIPTION}),p.length>0?(0,t.jsxs)("div",{className:ee().existingSlotNotice,children:[(0,t.jsx)(Y.Z,{className:ee().existingSlotIcon,
color:(0,S.Lq)(z.Ilk.GUILD_BOOSTING_PINK)}),(0,t.jsxs)("div",{children:[J.Z.Messages.GUILD_SUBSCRIPTION_PURCHASE_MODAL_UNUSED_SLOT_NOTICE.format({slotCount:p.length}),j>0&&null!=l?(0,t.jsx)(F.ZP,{text:J.Z.Messages.PREMIUM_GUILD_SUBSCRIBE_CONFIRM_CANCEL_WARNING.format({canceledCount:j,date:l.currentPeriodEnd}),children:function(e){return(0,t.jsx)(W.Z,oe(te({},e),{className:ee().existingSlotTooltipWarningIcon,color:(0,S.Lq)(z.Ilk.STATUS_YELLOW_500)}))}}):null]})]}):null,(0,t.jsxs)("div",{className:ee().planSelectRow,children:[(0,t.jsxs)("div",{className:ee().planSelectorWrapper,children:[(0,t.jsx)(B.Z,{value:o,onChange:function(e){return i(e)},className:ee().planSelector,minValue:1,maxValue:30}),(0,t.jsx)("div",{className:ee().planSelectorLabel,children:T?le({intervalType:I,intervalCount:C}):J.Z.Messages.GUILD_SUBSCRIPTION_PURCHASE_MODAL_COUNTER})]}),(0,t.jsx)("div",{className:ee().planSelectorPreviewPrice,children:T?(0,K.T4)(R.amount,R.currency):se({intervalType:I,intervalCount:C,
amount:R.amount,currency:R.currency})})]}),(0,t.jsx)("div",{className:ee().planSelectDivider}),(0,t.jsxs)("div",{className:ee().planSelectRow,children:[(0,t.jsx)("div",{className:ee().planSelectorSubtotal,children:J.Z.Messages.GUILD_SUBSCRIPTION_PURCHASE_MODAL_SUBTOTAL}),(0,t.jsx)("div",{className:ee().planSelectorSubtotalPrice,children:(0,t.jsx)(v.Z,{price:N,currency:R.currency,intervalType:I,intervalCount:C,isPrepaidPaymentSource:T})})]}),A&&(0,t.jsx)(f.Z,{message:J.Z.Messages.LOCALIZED_PRICING_HRK_EURO_WARNING.format({kunaPriceWithCurrency:(0,K.T4)(7.5345*N,Q.pK.HRK)})}),(0,t.jsx)(f.Z,{message:J.Z.Messages.BILLING_FINAL_PRICE_MAY_CHANGE.format({documentationLink:V.Z.getArticleURL(z.BhN.LOCALIZED_PRICING)})}),(0,t.jsx)(U,{text:L,color:Z.JX.PREMIUM_TIER_2})]})}function ue(e){var n=e.premiumSubscription,r=e.premiumSubscriptionPlan,o=e.proratedInvoicePreview,i=e.renewalInvoicePreview,s=e.priceOptions,l=r.interval,u=r.intervalCount,d=(0,c.e7)([D.Z],(function(){
return D.Z.getForSkuAndInterval(X.Si.GUILD,l,u)}));a()(null!=d,"Missing guildBoostingSubscriptionPlan");var f=function(e){return(0,C.j)(o.invoiceItems).find((function(n){return X.Z1.has(n.subscriptionPlanId)&&e(n)}))},p=f((function(e){return e.amount>=0}));a()(null!=p,"Missing guild boosting invoice item");var m=f((function(e){return e.amount<0})),S=null!=m?p.quantity-m.quantity:p.quantity,_=o.invoiceItems.filter((function(e){return(0,q.uZ)(e.subscriptionPlanId)})),E=_.reduce((function(e,n){return e+n.amount}),0),v=(0,I.pV)(p)*S,h=(0,K.T4)(v,o.currency),g=(0,K.og)(h,l,u),b=(0,K.T4)(o.total,o.currency)+(o.currency!==Q.pK.USD?"*":""),R=o.total-v-E,N=p.discounts.map((function(e){var n=e.amount/p.quantity;return oe(te({},e),{amount:n*S})})),U=(0,q.Ap)(s.paymentSourceId);return(0,t.jsxs)(t.Fragment,{children:[U?null:(0,t.jsx)(O.hG,{proratedInvoice:o,renewalInvoice:i}),(0,t.jsxs)(y.PO,{children:[(0,t.jsx)(y.q9,{children:J.Z.Messages.GUILD_SUBSCRIPTION_PURCHASE_MODAL_PURCHASE_DETAILS_HEADER
}),(0,t.jsx)(y.i$,{label:J.Z.Messages.GUILD_SUBSCRIPTION_PURCHASE_MODAL_INVOICE_ROW_CONTENT.format({numGuildSubscriptions:S,planName:(0,q.Gf)(d.id,!1,U)}),value:U?h:g,discounts:N,originalAmount:p.subscriptionPlanPrice*S,currency:o.currency,interval:d.interval,intervalCount:d.intervalCount}),0!==E?(0,t.jsx)(y.R$,{label:(0,t.jsx)(O.As,{label:J.Z.Messages.PREMIUM_SUBSCRIPTION_PLAN_ADJUSTMENT.format({planName:(0,q.aq)(_[0].subscriptionPlanId)}),tooltipText:J.Z.Messages.PREMIUM_SUBSCRIPTION_ADJUSTMENT_TOOLTIP}),value:(0,K.T4)(E,o.currency)}):null,0!==R?(0,t.jsx)(y.R$,{label:(0,t.jsx)(O.As,{label:J.Z.Messages.PREMIUM_SUBSCRIPTION_GUILD_SUBSCRIPTION_ADJUSTMENT,tooltipText:J.Z.Messages.PREMIUM_SUBSCRIPTION_ADJUSTMENT_TOOLTIP}),value:(0,K.T4)(R,o.currency)}):null,(0,t.jsx)(y.KU,{}),(0,t.jsx)(y.Ji,{label:(o.taxInclusive?U?J.Z.Messages.BILLING_INVOICE_TOTAL_TAX_INCLUSIVE:J.Z.Messages.BILLING_INVOICE_TODAY_TOTAL_TAX_INCLUSIVE:J.Z.Messages.BILLING_INVOICE_TODAY_TOTAL).format(),value:b}),null!=n?(0,
t.jsx)(O.nd,{premiumSubscription:n,proratedInvoice:o,renewalInvoice:i,isUpdate:!0,isPrepaidPaymentSource:U}):(0,t.jsx)(O.nd,{renewalInvoice:i,priceOptions:s,isPrepaidPaymentSource:U})]})]})}function ce(e){var n,r,o=e.paymentSources,i=e.priceOptions,s=e.currentPremiumSubscription,l=e.premiumSubscriptionPaymentSourceId,a=e.premiumSubscriptionPlan,f=e.newAdditionalPlans,S=e.onPaymentSourceChange,C=e.onPaymentSourceAdd,_=e.onPurchaseTermsChange,E=e.legalTermsNodeRef,y=e.hasLegalTermsFlash,v=i.paymentSourceId,h=(0,c.e7)([T.Z],(function(){return null!=l?T.Z.getPaymentSource(l):null})),O=(0,c.e7)([L.Z],(function(){return L.Z.hidePersonalInformation}));r=null!=s?(0,q.Zx)(s,f[0].quantity,f[0].planId):f;var b,R=ie((0,I.ED)({subscriptionId:null==s?void 0:s.id,items:r,renewal:!1,applyEntitlements:!0,paymentSourceId:v,currency:i.currency}),1)[0],N=ie((0,I.ED)({subscriptionId:null==s?void 0:s.id,items:r,renewal:!0,paymentSourceId:v,currency:i.currency
}),1)[0],U=u.M.EEA_COUNTRIES.has(j.Z.ipCountryCodeWithFallback);return(0,t.jsxs)("div",{className:ee().reviewStep,children:[null!=R&&null!=N?(0,t.jsx)(ue,{premiumSubscription:s,premiumSubscriptionPlan:a,proratedInvoicePreview:R,renewalInvoicePreview:N,priceOptions:i}):null,(0,t.jsxs)("div",{className:ee().paymentSourceWrapper,children:[(0,t.jsx)(k.vw,{tag:k.RB.H5,children:J.Z.Messages.PAYMENT_SOURCE_PAYMENT_REQUEST_INFO_TITLE}),null!=l?null!=h?(0,t.jsx)(F.DY,{text:J.Z.Messages.GUILD_SUBSCRIPTION_PURCHASE_MODAL_PAYMENT_SOURCE_TOOLTIP,children:(0,t.jsx)(p.Z,{paymentSources:[h],selectedPaymentSourceId:h.id,hidePersonalInformation:O,disabled:!0})}):(0,t.jsx)("div",{children:(0,t.jsx)(w.Z,{})}):(0,t.jsx)(p.Z,{paymentSources:Object.values(o),selectedPaymentSourceId:v,onChange:S,onPaymentSourceAdd:C,hidePersonalInformation:O})]}),(0,t.jsx)(g.Z,{isActive:y,ref:E,children:(0,t.jsx)(m.Z,{onChange:_,forceShow:!0,finePrint:(0,t.jsx)(d.Z,{subscriptionPlan:a,
paymentSourceType:null===(n=o[null!=v?v:""])||void 0===n?void 0:n.type}),showPricingLink:(null!==(b=null==R?void 0:R.currency)&&void 0!==b?b:Q.pK.USD)!==Q.pK.USD,showWithdrawalWaiver:U})})]})}function de(e){var n,r=e.onClose,i=e.guild,s=e.guildBoostQuantity,l=e.isTransfer,a=void 0!==l&&l,u=e.withAnimation,c=void 0===u||u,d=e.paymentSourceType,f=o.useContext(H.Z),p=ie(o.useState(G.fe.Scenes.ENTRY),2),m=p[0],S=p[1],I=ie(o.useState(!1),2),C=I[0],_=I[1];n=a?null==i?J.Z.Messages.GUILD_SUBSCRIPTION_PURCHASE_MODAL_TRANSFERRED_DESCRIPTION_GENERIC_GUILD.format():J.Z.Messages.GUILD_SUBSCRIPTION_PURCHASE_MODAL_TRANSFERRED_DESCRIPTION.format({guildName:i.name}):null==i?J.Z.Messages.GUILD_SUBSCRIPTION_PURCHASE_MODAL_ACTIVATED_DESCRIPTION_GENERIC_GUILD.format({guildSubscriptionQuantity:s}):J.Z.Messages.GUILD_SUBSCRIPTION_PURCHASE_MODAL_ACTIVATED_DESCRIPTION.format({guildName:i.name,guildSubscriptionQuantity:s});return(0,t.jsxs)("div",{className:ee().confirmationContainer,children:[c?(0,t.jsx)(G.fe,{
className:ee().confirmationAnimation,nextScene:m,onScenePlay:function(e){if(!C)switch(e){case G.fe.Scenes.ENTRY:return S(G.fe.Scenes.IDLE);case G.fe.Scenes.IDLE:return S(G.fe.Scenes.SUCCESS);case G.fe.Scenes.SUCCESS:_(!0);return S(G.fe.Scenes.IDLE)}},pauseWhileUnfocused:!1}):null,(0,t.jsx)(h.C,{className:ee().confirmationUpgradedBanner,theme:f,premiumType:X.p9.TIER_2,type:Q.X7.has(null!=d?d:Q.He.UNKNOWN)?h.C.Types.PREMIUM_PAYMENT_STARTED:h.C.Types.GUILD_BOOST_APPLIED}),(0,t.jsx)("div",{className:ee().confirmationText,children:n}),(0,t.jsx)(A.Co,{onClick:r,children:J.Z.Messages.GUILD_SUBSCRIPTION_PURCHASE_MODAL_ACTIVATED_CLOSE_BUTTON})]})}}}]);
//# sourceMappingURL=1e4fd66d211489b219c0.js.map